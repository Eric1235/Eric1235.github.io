
 <!DOCTYPE HTML>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  
    <title>2016-10-工作笔记 | Eric&#39;s Blog</title>
    <meta name="viewport" content="width=device-width, initial-scale=1,user-scalable=no">
    
    <meta name="author" content="Eric Li">
    

    
    <meta name="description" content="天气渐凉，注意保暖

出游 流浪">
<meta property="og:type" content="article">
<meta property="og:title" content="2016-10-工作笔记">
<meta property="og:url" content="http://yoursite.com/2016/10/12/Coding/2016-10工作笔记/2016-10-工作笔记/index.html">
<meta property="og:site_name" content="Eric's Blog">
<meta property="og:description" content="天气渐凉，注意保暖

出游 流浪">
<meta property="og:updated_time" content="2016-10-31T14:21:57.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="2016-10-工作笔记">
<meta name="twitter:description" content="天气渐凉，注意保暖

出游 流浪">
<meta name="twitter:creator" content="@https://twitter.com/ericli1235">

    
    <link rel="alternative" href="/atom.xml" title="Eric&#39;s Blog" type="application/atom+xml">
    
    
    <link rel="icon" href="/img/favicon.ico">
    
    
    <link rel="apple-touch-icon" href="/img/jacman.jpg">
    <link rel="apple-touch-icon-precomposed" href="/img/jacman.jpg">
    
    <link rel="stylesheet" href="/css/style.css">
</head>

  <body>
    <header>
      
<div>
		
			<div id="imglogo">
				<a href="/"><img src="/img/logo.png" alt="Eric&#39;s Blog" title="Eric&#39;s Blog"/></a>
			</div>
			
			<div id="textlogo">
				<h1 class="site-name"><a href="/" title="Eric&#39;s Blog">Eric&#39;s Blog</a></h1>
				<h2 class="blog-motto"></h2>
			</div>
			<div class="navbar"><a class="navbutton navmobile" href="#" title="菜单">
			</a></div>
			<nav class="animated">
				<ul>
					<ul>
					 
						<li><a href="/">Home</a></li>
					
						<li><a href="/archives">Archives</a></li>
					
						<li><a href="/about">About</a></li>
					
					<li>
 					
					<form class="search" action="//google.com/search" method="get" accept-charset="utf-8">
						<label>Search</label>
						<input type="search" id="search" name="q" autocomplete="off" maxlength="20" placeholder="搜索" />
						<input type="hidden" name="q" value="site:yoursite.com">
					</form>
					
					</li>
				</ul>
			</nav>			
</div>
    </header>
    <div id="container">
      <div id="main" class="post" itemscope itemprop="blogPost">
  
	<article itemprop="articleBody"> 
		<header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2016/10/12/Coding/2016-10工作笔记/2016-10-工作笔记/" title="2016-10-工作笔记" itemprop="url">2016-10-工作笔记</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="Eric Li" target="_blank" itemprop="author">Eric Li</a>
		
  <p class="article-time">
    <time datetime="2016-10-12T08:10:09.000Z" itemprop="datePublished"> 发表于 2016-10-12</time>
    
  </p>
</header>
	<div class="article-content">
		
		<div id="toc" class="toc-article">
			<strong class="toc-title">文章目录</strong>
		
			<ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#10-9-天气-阴"><span class="toc-number">1.</span> <span class="toc-text">10-9 天气:阴</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10月10-天气-晴"><span class="toc-number">2.</span> <span class="toc-text">10月10 天气:晴</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10月11日-天气-晴"><span class="toc-number">3.</span> <span class="toc-text">10月11日 天气:晴</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-12-天气-阴雨"><span class="toc-number">4.</span> <span class="toc-text">10-12 天气:阴雨</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-13-天气-阴"><span class="toc-number">5.</span> <span class="toc-text">10-13 天气:阴</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-14-天气-阴"><span class="toc-number">6.</span> <span class="toc-text">10-14 天气:阴</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-17-天气-晴"><span class="toc-number">7.</span> <span class="toc-text">10-17 天气:晴</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-19日-天气-阴"><span class="toc-number">8.</span> <span class="toc-text">10-19日 天气: 阴</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-20日-天气-阴"><span class="toc-number">9.</span> <span class="toc-text">10-20日 天气:阴</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-21日-天气：阴"><span class="toc-number">10.</span> <span class="toc-text">10-21日 天气：阴</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-24日-天气-阴"><span class="toc-number">11.</span> <span class="toc-text">10-24日 天气:阴</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-25-天气-晴"><span class="toc-number">12.</span> <span class="toc-text">10-25 天气:晴</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10月26日-天气-晴"><span class="toc-number">13.</span> <span class="toc-text">10月26日 天气:晴</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-27日-天气-晴"><span class="toc-number">14.</span> <span class="toc-text">10-27日 天气:晴</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-28日-天气-晴"><span class="toc-number">15.</span> <span class="toc-text">10-28日 天气:晴</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-31日-天气-阴"><span class="toc-number">16.</span> <span class="toc-text">10-31日 天气:阴</span></a></li></ol>
		
		</div>
		
		<blockquote>
<p>天气渐凉，注意保暖</p>
</blockquote>
<p><code>出游</code> <code>流浪</code></p>
<a id="more"></a>
<h3 id="10-9-天气-阴"><a href="#10-9-天气-阴" class="headerlink" title="10-9 天气:阴"></a>10-9 天气:阴</h3><p>结束了精彩的国庆长假，我又回到了我的工作岗位坚守。今天早上先来一点自主学习的东西，那就是recyclerview的数据集操作。DiffUtil这个工具类。以前使用adapter的时候，如果有新的数据到来，我一般都是直接去调用notifyDatesetChange（）去进行无脑刷新，但是成本太高。况且，这只是一个无脑刷新，根本不能触发recyclerview的动画。所以，现在谷歌推出了这么一个工具类，可以去对数据集进行差异改变判断，从而可以进行局部刷新。如果数据集较大的话，我们还是要开启一个子线程，去那里对数据进行比对。核心就是去重写result的callback。用法：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Callback</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">int</span> <span class="title">getOldListSize</span><span class="params">()</span></span>;<span class="comment">//老数据集size</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">int</span> <span class="title">getNewListSize</span><span class="params">()</span></span>;<span class="comment">//新数据集size</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">boolean</span> <span class="title">areItemsTheSame</span><span class="params">(<span class="keyword">int</span> oldItemPosition, <span class="keyword">int</span> newItemPosition)</span></span>;<span class="comment">//新老数据集在同一个postion的Item是否是一个对象？（可能内容不同，如果这里返回true，会调用下面的方法）</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">boolean</span> <span class="title">areContentsTheSame</span><span class="params">(<span class="keyword">int</span> oldItemPosition, <span class="keyword">int</span> newItemPosition)</span></span>;<span class="comment">//这个方法仅仅是上面方法返回ture才会调用，我的理解是只有notifyItemRangeChanged()才会调用，判断item的内容是否有变化</span></div><div class="line"></div><div class="line">    <span class="comment">//该方法在DiffUtil高级用法中用到 ，暂且不提</span></div><div class="line">    <span class="meta">@Nullable</span></div><div class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">getChangePayload</span><span class="params">(<span class="keyword">int</span> oldItemPosition, <span class="keyword">int</span> newItemPosition)</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="10月10-天气-晴"><a href="#10月10-天气-晴" class="headerlink" title="10月10 天气:晴"></a>10月10 天气:晴</h3><p>今天刚刚换到了新的部门了，暂时还是没有事情可以做，又是自主学习中。理一下早上强哥说的播放器的思路吧。这种播放器就是使用音频和画面分开播放，我们要做的事情就是管理好线程，去进行同步的播放。这个核心的理念就是时间点。所有的播放都是跟随时间点去刷新界面，主要用到的方法就是二分法去查找到相应的聊天或者涂鸦的bean，然后回调出去，让ui去画。播放器写了两个播放，一个是纯音频播放的，直接使用mediaplayer就好。另外就是重点的脚本播放器，随着时间的推移，去实时刷新界面，主要就是ppt的切换，涂鸦的绘制以及聊天信息的展示。播放器开启的时候，脚本和音频同时开启，暂停和退出也一样，生命周期捆绑在一起。线程的操作部分，读和写都是有线程组在写，两个线程，写脚本的和写聊天信息的。</p>
<ul>
<li>fragment直接使用getString()的话，会有很大的一个概率会导致闪退，是因为调用getActivity()会有很大的几率会得到null。fragment有时候会脱离activity，就会得到null。</li>
<li>fileprovider，这个在7.0以后会很有用。7.0以后，我们不能再通过file://开头的url去获取到文件，原因是那样做不安全。改进的方法是创建一个文件提供器。</li>
<li>和强哥聊了一通，知道了我们公司的产品研发是非常地混乱的。这里的环境是不会能够让产品快速去进行调整的，一切听老板的。呵呵。</li>
</ul>
<h3 id="10月11日-天气-晴"><a href="#10月11日-天气-晴" class="headerlink" title="10月11日 天气:晴"></a>10月11日 天气:晴</h3><ul>
<li>昨天看了一下现在的项目的逻辑，主要就是app套壳H5，都让H5去干去了，我们干什么？给它再套多一个壳，做多一个出来。</li>
<li>view的触摸绘图，主要的思想就是去监听view的onTouch事件，在里面获取到回调，在move的时候，实时去得到移动的位置，然后进行canvas.drawLine（x1,y1,x2,y2），invalidate()实时刷新就好（一般支持imageview）。</li>
<li>新的知识点就是去原有的图片上面进行画图，原理就是去得到原图的bitmap，根据原图去创造出一个新的bitmap（包含原图），把bitmap设置到imageview，然后就去搞这个新的bitmap就好。</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">mBitmap = Bitmap.createBitmap(<span class="number">300</span>,<span class="number">300</span>, Bitmap.Config.ARGB_8888);</div><div class="line">Bitmap bitmap =  Bitmap.createBitmap(mBitmap.getWidth(),mBitmap.getHeight(),mBitmap.getConfig());</div><div class="line">mImageView.setImageBitmap(bitmap);</div><div class="line"><span class="comment">//接下来就是要在touch事件里面搞事了</span></div></pre></td></tr></table></figure>
<ul>
<li>命令模式简介，使用命令模式的好处就是可以将调用者，客户以及命令能区分开来。调用者发送命令给客户端，客户端去执行命令。命令模式其实就是对命令进行封装，将命令请求者和命令执行者的责任分离开来实现松耦合。</li>
<li>文件增量更新。流程，使用工具对两个apk文件进行差异对比，得到第三个apk。项目中要引入一个库，生成新的so。然后下载了以后，就要去进行合并操作。</li>
<li>我一直最想去学的悬停头部了啦。用到的技术的recyclerview和itemDecoration。自定义一个来。自定义的时候，晚上走的时候发现出现了问题，莫名其妙的找不到方法的的错误。上网去问了一下百度，原来是v7包的版本要和view的版本相对应，这样才能够正常运行。我改了一下gradle，真可以了。</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">testCompile <span class="string">'junit:junit:4.12'</span></div><div class="line">  compile <span class="string">'com.android.support:recyclerview-v7:24.2.1'</span></div><div class="line">  compile <span class="string">'com.github.promeg:tinypinyin:1.0.0'</span></div><div class="line">  <span class="comment">// ~80KB</span></div><div class="line">  compile <span class="string">'com.android.support:appcompat-v7:24.2.1'</span></div></pre></td></tr></table></figure>
<h3 id="10-12-天气-阴雨"><a href="#10-12-天气-阴雨" class="headerlink" title="10-12 天气:阴雨"></a>10-12 天气:阴雨</h3><p>学习到recyclerview的简单用法了，懂得实现悬停的原理。<br>再去学习画图相关的啦。</p>
<ul>
<li>shader图像渲染。　　BitmapShader的作用是使用一张位图作为纹理来对某一区域进行填充。可以想象成在一块区域内铺瓷砖，只是这里的瓷砖是一张张位图而已。</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">　　<span class="comment">//BitmapShader函数原型为：</span></div><div class="line">　　<span class="function"><span class="keyword">public</span> <span class="title">BitmapShader</span> <span class="params">(Bitmap bitmap, Shader.TileMode tileX, Shader.TileMode tileY)</span></span>;</div></pre></td></tr></table></figure>
<p>　　其中，参数bitmap表示用来作为纹理填充的位图；参数tileX表示在位图X方向上位图衔接形式；参数tileY表示在位图Y方向上位图衔接形式。</p>
<p>　　Shader.TileMode有3种参数可供选择，分别为CLAMP、REPEAT和MIRROR。</p>
<p>　　CLAMP的作用是如果渲染器超出原始边界范围，则会复制边缘颜色对超出范围的区域进行着色。REPEAT的作用是在横向和纵向上以平铺的形式重复渲染位图。MIRROR的作用是在横向和纵向上以镜像的方式重复渲染位图。</p>
<p>LinearGradient（线性渲染）:LinearGradient的作用是实现某一区域内颜色的线性渐变效果。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="title">LinearGradient</span> <span class="params">(<span class="keyword">float</span> x0, <span class="keyword">float</span> y0, <span class="keyword">float</span> x1, <span class="keyword">float</span> y1, <span class="keyword">int</span>[] colors, <span class="keyword">float</span>[] positions, Shader.TileMode tile)</span></span>;</div><div class="line"><span class="comment">//其中，参数x0表示渐变的起始点x坐标；参数y0表示渐变的起始点y坐标；参数x1表示渐变的终点x坐标；参数y1表示渐变的终点y坐标；参数colors表示渐变的颜色数组；参数positions用来指定颜色数组的相对位置；参数tile表示平铺方式。</span></div></pre></td></tr></table></figure>
<p>ComposeShader（混合渲染）：　　ComposeShader的作用是实现渲染效果的叠加，如BitmapShader与LinearGradient的混合渲染效果等。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="title">ComposeShader</span> <span class="params">(Shader shaderA, Shader shaderB, PorterDuff.Mode mode)</span></span>;</div><div class="line"><span class="comment">//PorterDuff.Mode有16种参数可供选择，分别为：CLEAR、SRC、DST、SRC_OVER、DST_OVER、SRC_IN、DST_IN、SRC_OUT、DST_OUT、SRC_ATOP、DST_ATOP、XOR、DARKEN、LIGHTEN、MULTIPLY、SCREEN。</span></div></pre></td></tr></table></figure>
<p>RadialGradient（环形渲染）:RadialGradient的作用是在某一区域内实现环形的渐变效果。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="title">RadialGradient</span> <span class="params">(<span class="keyword">float</span> x, <span class="keyword">float</span> y, <span class="keyword">float</span> radius, <span class="keyword">int</span>[] colors, <span class="keyword">float</span>[] positions, Shader.TileMode tile)</span></span>;</div><div class="line"><span class="comment">//其中，参数x表示环形的圆心x坐标；参数y表示环形的圆心y坐标；参数radius表示环形的半径；参数colors表示环形渐变的颜色数组；参数positions用来指定颜色数组的相对位置；参数tile表示平铺的方式。</span></div></pre></td></tr></table></figure>
<p>SweepGradient（梯度渲染）:SweepGradient也称为扫描渲染，是指在某一中心以x轴正方向逆时针旋转一周而形成的扫描效果的渲染形式。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="title">SweepGradient</span> <span class="params">(<span class="keyword">float</span> cx, <span class="keyword">float</span> cy, <span class="keyword">int</span>[] colors, <span class="keyword">float</span>[] positions)</span></span>;</div><div class="line"><span class="comment">//其中，参数cx表示扫描的中心x坐标；参数cy表示扫描的中心y坐标；参数colors表示梯度渐变的颜色数组；参数positions用来指定颜色数组的相对位置。</span></div></pre></td></tr></table></figure>
<ul>
<li><p>Xfermode全名transfer-mode，其作用是实现两张图叠加时的混合效果。16种的混合效果了。使用Xfermode的特性，是可以画出圆形图来的。先画图，再画圆，然后设置模式为DstIn，别忘了，在最后的时候，要把Xfermode设置回null。</p>
</li>
<li><p>pathEffect，设置path的效果，有虚线，圆角，抖动等，也可以混合使用两种效果。具体，看需求使用。</p>
</li>
</ul>
<h3 id="10-13-天气-阴"><a href="#10-13-天气-阴" class="headerlink" title="10-13 天气:阴"></a>10-13 天气:阴</h3><p>学习自定义控件，圆形进度条。</p>
<ul>
<li>整个控件可以分成三个部分：外面的框，文字，按钮。</li>
<li>外框就是一共有100个点，代表进度是0到100.然后它们之间的间隔就是一个点的间隔。所以整个圆我们就划分成为200份。顺时针去画，先画已经完成的进度（0–percnet），再画未完成的进度（percent–100）。需要注意的就是旋转了，这也是一直迷惑了我的地方。这里用的是canvas.rotate()，进行旋转，一个for循环就能够画出一个圆了。未完成进度也是一样如此。</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">while</span> (count ++ &lt; mPercent)&#123;</div><div class="line">            mCanvas.drawCircle(mCenterX,mCenterY - outRadius + dotRadius , dotRadius , mPaint);</div><div class="line">            mCanvas.rotate(<span class="number">3.6f</span>,mCenterX , mCenterY);<span class="comment">//画布旋转3.6°</span></div><div class="line">        &#125;</div></pre></td></tr></table></figure>
<ul>
<li>按钮的绘制就是先确定文字的框框大小，用左上和右下两个点定住。绘制圆角的边框，用RectF去确定整个的大小，绘制边框，然后去绘制文字。判断触摸区域的大小就是根据event的x和y坐标去判断是否在文字的区域内部了。此外，还要去判断触摸区域是否是在圆角的扇形里面，具体的代码请看：</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">boolean</span> <span class="title">isTouchedInButton</span><span class="params">(<span class="keyword">final</span> <span class="keyword">float</span> x, <span class="keyword">final</span> <span class="keyword">float</span> y)</span></span>&#123;</div><div class="line">        <span class="comment">//文字区域的判断</span></div><div class="line">        <span class="keyword">if</span>(x &gt;= mButtonRectStart.x &amp;&amp; x &lt;= mButtonRectEnd.x &amp;&amp; y &gt;= mButtonRectStart.y &amp;&amp; y &lt;= mButtonRectEnd.y)&#123;</div><div class="line">            <span class="keyword">return</span> <span class="keyword">true</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="comment">//圆角的区域判断</span></div><div class="line">        <span class="keyword">float</span> centerX = mButtonRectStart.x;</div><div class="line">        <span class="keyword">float</span> centerY = (mButtonRectStart.y - mButtonRectEnd.y)/<span class="number">2</span>;</div><div class="line">        <span class="keyword">float</span> newX = x-centerX;</div><div class="line">        <span class="keyword">float</span> newY = y - centerY;</div><div class="line">        <span class="comment">//在不在左边扇形里面</span></div><div class="line">        <span class="keyword">if</span>(newX * newX + newY * newY &lt;= mButtonRadius * mButtonRadius)&#123;</div><div class="line">            <span class="keyword">return</span> <span class="keyword">true</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="comment">//在不在左边扇形里面</span></div><div class="line">        centerX = mButtonRectEnd.x;</div><div class="line">        newX = x - centerX;</div><div class="line">        <span class="keyword">return</span> newX * newX + newY * newY &lt;= mButtonRadius * mButtonRadius;</div><div class="line">    &#125;</div></pre></td></tr></table></figure>
<ul>
<li>绘制文字也差不多，先去圈出总体的区域大小，先去绘制好大的文字，然后去绘制好单位。但是问题来了，最纠结的事情就是要如何去进行对齐。这里就要去学习到view中的baseLine了。FontMetrics里面提供了字体的top,ascent,descent,bottom,leading等的值，我们要通过这些值去计算出真正的baseline值。两者皆可。得到的baseline就死drawText()中的y值。</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">baseline = centerY + (fm.descent - fm.ascent)/<span class="number">2</span> - fm.descent;</div><div class="line"></div><div class="line">baseline = centerY + (fm.bottom- fm.top)/<span class="number">2</span> - fm.bottom;</div></pre></td></tr></table></figure>
<ul>
<li>状态栏着色：思路就是先把状态栏变成透明的，然后根据需要去进行着色。</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//让状态栏透明</span></div><div class="line"><span class="keyword">if</span> (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.LOLLIPOP) &#123;<span class="comment">//5.0及以上</span></div><div class="line">            View decorView = getWindow().getDecorView();</div><div class="line">            <span class="keyword">int</span> option = View.SYSTEM_UI_FLAG_LAYOUT_FULLSCREEN</div><div class="line">                    | View.SYSTEM_UI_FLAG_LAYOUT_STABLE;</div><div class="line">            decorView.setSystemUiVisibility(option);</div><div class="line">            getWindow().setStatusBarColor(Color.TRANSPARENT);</div><div class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.KITKAT) &#123;<span class="comment">//4.4到5.0</span></div><div class="line">            WindowManager.LayoutParams localLayoutParams = getWindow().getAttributes();</div><div class="line">            localLayoutParams.flags = (WindowManager.LayoutParams.FLAG_TRANSLUCENT_STATUS | localLayoutParams.flags);</div><div class="line">        &#125;</div></pre></td></tr></table></figure>
<p>不同的系统设置不同的主题，深入的，还是要去了解安卓的窗口管理的方式，知道安卓的窗口的区域是怎么划分的，才能更加得心应手。</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">//values</div><div class="line">&lt;style name="TranslucentTheme" parent="AppTheme"&gt;</div><div class="line">&lt;/style&gt;</div><div class="line"></div><div class="line">//values-v19</div><div class="line">&lt;style name="TranslucentTheme" parent="Theme.AppCompat.Light.NoActionBar"&gt;</div><div class="line">        &lt;item name="android:windowTranslucentStatus"&gt;true&lt;/item&gt;</div><div class="line">        &lt;item name="android:windowTranslucentNavigation"&gt;false&lt;/item&gt;</div><div class="line">&lt;/style&gt;</div><div class="line"></div><div class="line">//values-v21</div><div class="line">&lt;style name="TranslucentTheme" parent="Theme.AppCompat.Light.NoActionBar"&gt;</div><div class="line">        &lt;item name="android:windowTranslucentStatus"&gt;true&lt;/item&gt;</div><div class="line">        &lt;item name="android:windowTranslucentNavigation"&gt;false&lt;/item&gt;</div><div class="line">        &lt;item name="android:statusBarColor"&gt;@android:color/transparent&lt;/item&gt;</div><div class="line">&lt;/style&gt;</div></pre></td></tr></table></figure>
<p>如果不起作用的时候，就要去把自己想要的头部颜色，添加到状态栏，具体代码如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">addStatusBarView</span><span class="params">()</span> </span>&#123;</div><div class="line">      View view = <span class="keyword">new</span> View(<span class="keyword">this</span>);</div><div class="line">      view.setBackgroundColor(getResources().getColor(R.color.colorPrimary));</div><div class="line">      LinearLayout.LayoutParams params = <span class="keyword">new</span> LinearLayout.LayoutParams(ViewGroup.LayoutParams.MATCH_PARENT,</div><div class="line">              getStatusBarHeight(<span class="keyword">this</span>));</div><div class="line">      ViewGroup decorView = (ViewGroup) findViewById(android.R.id.content);</div><div class="line">      decorView.addView(view, params);</div><div class="line">  &#125;</div></pre></td></tr></table></figure>
<ul>
<li>Matrix类，是一个3 <em> 3的矩阵，一般提供了平移，旋转，缩放和错切等方式。安卓当中不仅仅只有Matrix，还有ColorMatrix（4 </em> 5，处理图像颜色，对比度）等类。</li>
<li><p>imageawear，这个类可以对imageview进行封装，使其变成一个弱引用，在内存不足的时候，可以去进行释放。</p>
</li>
<li><p>如果在项目Library Module 中compile带资源的aar，很大可能在External Libraries中看不到这个aar包本身以及其依赖的子aar（但不带资源的子jar包还是可以看到的），会误以为compile失败！此时只要先整个项目编译运行一遍，再编写代码即可索引到此包！</p>
</li>
</ul>
<h3 id="10-14-天气-阴"><a href="#10-14-天气-阴" class="headerlink" title="10-14 天气:阴"></a>10-14 天气:阴</h3><ul>
<li>今天我终于看到了全辅导出现了方法数超过65k的新闻。就那么几个人，纯手工是写不爆这个数得，肯定是有其他库在作怪。我等他们去排查一下了，毕竟我已经没有权限去搞这个东东。</li>
<li>照着去写了一下，但是我不敢去验证自己写得究竟对不对，把悬念留一下，就算是错，我会很快把它搞定的。这里需要把我踩的坑拿出来说一下，就算jni的编译问题。我写android.mk的时候，先是把所有的包都导入进去了，但是直接编译还是不行，说有些方法是找不到，我就纳闷会缺一点什么东西了呀。就去找一下原因。哦，一堆包里面是有.h和.c文件的，我前面只是把.h文件包含进去了，没有把.c文件包含进去，怎么样去修改？继续添加呗。这里，就是修改好后的android.mk文件。其实，还有更加好的一种做法就是去把biz2这个玩意打包成为一个静态库.a，直接给我们调用，那样代码会更加精简。</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">LOCAL_PATH := $(call my-dir)</div><div class="line">include $(CLEAR_VARS)</div><div class="line">BIZ2_DIR = biz</div><div class="line">G_INCLUDES := $(LOCAL_PATH)/biz</div><div class="line">LOCAL_MODULE := bsdiff</div><div class="line">LOCAL_SRC_FILES := JniInterface.cpp biz/bzlib.c biz/crctable.c biz/randtable.c biz/decompress.c biz/huffman.c biz/compress.c biz/blocksort.c</div><div class="line">LOCAL_C_INCLUDES := $(G_INCLUDES)</div><div class="line">LOCAL_ARM_MODE := arm</div><div class="line">LOCAL_LDLIBS := -llog</div><div class="line">LOCAL_CFLAGS    := -g</div><div class="line">include $(BUILD_SHARED_LIBRARY)</div></pre></td></tr></table></figure>
<ul>
<li>另外学习到的知识就是权限动态获取。这个就是针对6.0以后的啦，如果用户禁止了app的某个权限，则在使用需要这个权限的时候，就要去进行动态申请。有权限回调后才去执行，否则不能执行。</li>
</ul>
<h3 id="10-17-天气-晴"><a href="#10-17-天气-晴" class="headerlink" title="10-17 天气:晴"></a>10-17 天气:晴</h3><ul>
<li>edittext输入的烟花效果。最关键的类就是去去获取到输入个光标的位置。目前呢，并没有特别好的方式，能够使用的方法就是反射。</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line">     * 通过反射获取光标的坐标</div><div class="line">     * 观察到TextView的incalidateCursorPath()方法，光标闪动时重绘光标的</div><div class="line">     * 方法的最后有个invalidate(bounds.left + horizontalPadding, bounds.top + verticalPadding,</div><div class="line">     *                  bounds.right + horizontalPadding, bounds.bottom + verticalPadding);</div><div class="line">     * 就是光标的重绘区域，由此可得光标的坐标</div><div class="line">     * 具体的坐标在TextView.mEditor.mCursorDrawable里，获得Drawable后用getBounds()得到Rect。</div><div class="line">     * 之后还有获得偏移量修正，通过以下三个方法获得：</div><div class="line">     * getVerticalOffset(),getCompoundPaddingLeft(),getExtendPaddingLeft()。</div><div class="line">     * <span class="doctag">@return</span></div><div class="line">     */</div><div class="line">    <span class="keyword">private</span> <span class="keyword">float</span>[] getCursorCoordinate()&#123;</div><div class="line"></div><div class="line">        <span class="keyword">int</span> xOffset = <span class="number">0</span>;</div><div class="line">        <span class="keyword">int</span> yOffset = <span class="number">0</span>;</div><div class="line">        Class&lt;?&gt; clazz = EditText.class;</div><div class="line">        clazz = clazz.getSuperclass();<span class="comment">//获得超类，那个是超类的方法</span></div><div class="line">        <span class="keyword">try</span>&#123;</div><div class="line">            Field editor = clazz.getDeclaredField(<span class="string">"mEditor"</span>);</div><div class="line">            editor.setAccessible(<span class="keyword">true</span>);</div><div class="line">            Object mEditor = editor.get(mEditText);</div><div class="line">            Class&lt;?&gt; editorClazz = Class.forName(<span class="string">"android.widget.Editor"</span>);</div><div class="line">            Field drawables = editorClazz.getDeclaredField(<span class="string">"mCursorDrawable"</span>);</div><div class="line">            drawables.setAccessible(<span class="keyword">true</span>);</div><div class="line">            Drawable[] drawable = (Drawable[])drawables.get(mEditor);</div><div class="line"></div><div class="line">            Method getVerticalOffset = clazz.getDeclaredMethod(<span class="string">"getVerticalOffset"</span>,<span class="keyword">boolean</span>.class);</div><div class="line">            Method getCompoundPaddingLeft = clazz.getDeclaredMethod(<span class="string">"getCompoundPaddingLeft"</span>);</div><div class="line">            Method getExtendedPaddingTop = clazz.getDeclaredMethod(<span class="string">"getExtendedPaddingTop"</span>);</div><div class="line">            getVerticalOffset.setAccessible(<span class="keyword">true</span>);</div><div class="line">            getCompoundPaddingLeft.setAccessible(<span class="keyword">true</span>);</div><div class="line">            getExtendedPaddingTop.setAccessible(<span class="keyword">true</span>);</div><div class="line">            <span class="keyword">if</span>(drawable != <span class="keyword">null</span>)&#123;</div><div class="line">                Rect bounds = drawable[<span class="number">0</span>].getBounds();</div><div class="line">                Log.d(<span class="string">"Eric"</span>,bounds.toString());</div><div class="line">                <span class="comment">//进行偏移量修正</span></div><div class="line">                xOffset = bounds.left + (<span class="keyword">int</span>) getCompoundPaddingLeft.invoke(mEditText);</div><div class="line">                yOffset = bounds.bottom + (<span class="keyword">int</span>) getExtendedPaddingTop.invoke(mEditText) + (<span class="keyword">int</span>)getVerticalOffset.invoke(mEditText,<span class="keyword">false</span>);</div><div class="line">            &#125;</div><div class="line">        &#125;<span class="keyword">catch</span> (NoSuchFieldException e)&#123;</div><div class="line">            e.printStackTrace();</div><div class="line">        &#125;<span class="keyword">catch</span> (InvocationTargetException e)&#123;</div><div class="line">            e.printStackTrace();</div><div class="line">        &#125;<span class="keyword">catch</span> (NoSuchMethodException e)&#123;</div><div class="line">            e.printStackTrace();</div><div class="line">        &#125; <span class="keyword">catch</span> (IllegalAccessException e)&#123;</div><div class="line">            e.printStackTrace();</div><div class="line">        &#125;<span class="keyword">catch</span> (ClassNotFoundException e)&#123;</div><div class="line">            e.printStackTrace();</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">float</span> x = mEditText.getX() + xOffset;</div><div class="line">        <span class="keyword">float</span> y = mEditText.getY() + yOffset;</div><div class="line">        Log.d(<span class="string">"Eric"</span>,<span class="string">"x="</span>+x + <span class="string">"  y="</span> + y);</div><div class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="keyword">float</span>[] &#123;x,y&#125;;</div><div class="line">    &#125;</div></pre></td></tr></table></figure>
<h3 id="10-19日-天气-阴"><a href="#10-19日-天气-阴" class="headerlink" title="10-19日 天气: 阴"></a>10-19日 天气: 阴</h3><p>蛇王了一天，今天回去了公司上班，有了新的需求了啊，挺好的。但是，抽离了一下，貌似和原生的并没有什么什么任务。我今早就只是仅仅去解决了一下对话框不消失的小bug，但是就没什么事情做了。握草</p>
<ul>
<li>学习java的反射哦。首先要入手的就是最重要的Class类。还是去学习思想了啦。Class类，它的对象就是jvm所需要的所有信息。里面是包含了所有的域，方法。既然我们都能够拿到这个对象了，.java文件里面的所有东西我们都能知道的啊。比如说取得新的对象，超类，域，方法，修饰符，参数等信息。<br>高能的东西就是去操作那些我们得到的东西了。setAccable（true）就是可以去操作私有的东西。invoke就是方法调用，需要传入对象和相应的参数。如何修改域呢？Field类里面就集合了get和set，进行值的修改。目前需要注意到的地方就是对方法的获取，参数那里要设置的是基本类型，不能用包装类去代替。调用static的方法，不需要传进去对象。</li>
<li>概念补充，反射就是可以把一个类里面的所有东西（成员，方法）当成一个对象来操作。</li>
<li>通过反射API可以获取程序在运行时刻的内部结构。</li>
</ul>
<h3 id="10-20日-天气-阴"><a href="#10-20日-天气-阴" class="headerlink" title="10-20日 天气:阴"></a>10-20日 天气:阴</h3><p>有了新的任务，我要去开一个新的工程，进行移动集团的app开发了。使用的是原来的框架，但是在创建的时候，问题就来了。爆出了一个manifest合并错误的信息。什么鬼？这是我第一次看到。后来搜索了一下，就是我们的依赖库里面的application标签的一些属性和现有app的属性重叠了，做法有两种，一种是去屏蔽重叠的标签，另外一种就是去删除依赖库那些没用的东西。我选择了第二种方法去执行，暂时没有问题。</p>
<ul>
<li>项目的事啦，点击重新加载是不是，搞一搞代码就能够完事的了。</li>
<li>优化的地方，就是要去把配置进行进一步的抽离。把global_config.gradle里面写死的东西，进一步抽离到gradle.properties中去。然后就能够生成BuildConfig.java文件，得到配置了。这样还不行，还要进一步用一个文件，比如ProjectConfig.java这个文件去把生成的东西拿到，以后项目中要用到这些东西，就直接通过类调用。</li>
</ul>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">#后台测试地址</div><div class="line">SERVER_URL = "http://app.qky-dev.thinkjoy.com.cn"</div><div class="line">#主页地址</div><div class="line">HOME_PAGE_URL = "http://app.qky-dev.thinkjoy.com.cn/html/index.html"</div><div class="line">#消息地址</div><div class="line">MSG_PAGE_URL = "http://app.qky-dev.thinkjoy.com.cn/html/news.html"</div><div class="line">#联系人地址</div><div class="line">CONTACT_PAGE_URL = "http://app.qky-dev.thinkjoy.com.cn/html/conts.html?"</div><div class="line">#app页面地址</div><div class="line">APP_PAGE_URL = "http://app.qky-dev.thinkjoy.com.cn/html/app.html?"</div></pre></td></tr></table></figure>
<p>映射到gradle</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//配置公有变量，泰中云测试环境</span></div><div class="line">   buildConfigField(<span class="string">"String"</span>, <span class="string">"SERVER_URL"</span>, <span class="string">"$SERVER_URL"</span>)</div><div class="line">   buildConfigField(<span class="string">"String"</span>, <span class="string">"HOME_PAGE_URL"</span>, <span class="string">"$HOME_PAGE_URL"</span>)</div><div class="line">   buildConfigField(<span class="string">"String"</span>, <span class="string">"MSG_PAGE_URL"</span>, <span class="string">"$MSG_PAGE_URL"</span>)</div><div class="line">   buildConfigField(<span class="string">"String"</span>, <span class="string">"CONTACT_PAGE_URL"</span>, <span class="string">"$CONTACT_PAGE_URL"</span>)</div><div class="line">   buildConfigField(<span class="string">"String"</span>, <span class="string">"APP_PAGE_URL"</span>, <span class="string">"$APP_PAGE_URL"</span>)</div></pre></td></tr></table></figure>
<p>最后就会生成BuildConfig.java文件。</p>
<ul>
<li>AAR（Android Archive）包是一个Android库项目的二进制归档文件。</li>
<li>可以使用ProGuard进行代码混淆。</li>
</ul>
<h3 id="10-21日-天气：阴"><a href="#10-21日-天气：阴" class="headerlink" title="10-21日 天气：阴"></a>10-21日 天气：阴</h3><ul>
<li>要开新的项目，所以要把ui给抽离出来。最怕的就是.R文件的问题了，这个就很尴尬了哦，得一个一个文件去找。这不是问题，我可以慢慢去搞好。但是问题来了，出现了一个我不认识的错误，但是隐约感觉到是gradle的问题，查询了一下，是build.gradle的配置不是一致，所以不能搞好。按照最新的去修改，然后就解决问题了。</li>
<li>有遇到了一个更加蛋疼的问题，点击图标，竟然可以唤起两个app，让你去选择其中一个来玩玩咯。呵呵，我好郁闷，这个问题必须解决呀。检查一下，看看包名是不是一样的。</li>
<li>子线程真的不能去更新ui？极端情况下是可以的，在最开始的时候，当ViewRoot没有被创建起来的时候。ViewRoot是在activity的onResume的生命周期的时候才会去被创建，然后就可以checkThread，判断线程是不是子线程。如果在onCreate那里弄一个线程马上执行，是可以刷新View的。</li>
<li>继续去搞反射，就要去死磕这个东西。Class.forName有两种版本，普通的用法在类被载入的时候就会去执行静态的区域块，第二个版本，就是四个参数的，设置参数init为false的话，静态区域块就不会被执行。</li>
<li>临近下班了是不是，找到人，就把那个问题找到了原因。问题出在隐式intent的跳转上。这就奇怪了，我们的项目所有的activity跳转都是隐式的？为什么要使用隐式？为的就是解耦。使用隐式intent，匹配会慢一点点，但是基本不用改很多东西。项目的包名，文件名会经常的改动，使用显示跳转，会有一定的概率导致程序崩溃。隐式intent要去进行匹配，会花费一定是时间，效率没有那么高，但是安全啊。</li>
<li>目前还是debug的经验不足。我今天早上找了一早上的出错原因，竟然一直怀疑是两个程序的包名是一样的，这怎么可能呢，我明明是有改动过了的。继续找的时候，补充了一下在as的配置中，包名的正确位置是在哪里，还有，又去复习了一下安卓程序的启动方面的知识。现在清楚了，隐式intent的使用注意事项。</li>
</ul>
<h3 id="10-24日-天气-阴"><a href="#10-24日-天气-阴" class="headerlink" title="10-24日 天气:阴"></a>10-24日 天气:阴</h3><p>周末捣鼓了一下app的共存问题，我的决定是还继续使用隐式的intent，为了解耦。做法就是要去给不同的activity，用包名再加后缀的方式都添加一个action进去。改的时候，也出问题了。就是在基类的那里，也有要进行跳转的地方。这个就有点尴尬了，基类的话，只能有一份，怎么去进行不同app的跳转？那么，就去加入多一个Config变量，标明是哪个项目的。然后根据需要去使用不同的配置。</p>
<ul>
<li>工程学方法的学习，这个是学习到了项目的配置了。对于是全局使用的东西，就必须要抽离到全局的配置当中去。gradle的配置信息等，也分是全局还是局部的，我这里可以定义一个global的gradle，其他的gradle就依赖这个东西，得到全局的配置，最主要的就是sdk版本号什么的。还有，也应该是要抽离出一个项目配置的Config.java文件。</li>
<li>自定义控件的学习Matrix，3*3的矩阵嘛，说了好多次了。但是，画布canvas获取到的矩阵会有问题，如果可以，我们直接就用画布提供的功能，抛弃matrix，或者，使用view.getMartix（）。</li>
<li>webview的使用。现在切入的点就是调用js代码。基本的设置就略过不提，需要开启网络权限和开启js的调用权限。基本调用语法：</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">webview.loadUrl(<span class="string">"javascript:do()"</span>)</div></pre></td></tr></table></figure>
<p>这样就开启了调用js里面的do方法了。目前项目里面用到的就是关闭原生的h5进度条，主要就是用于选择文件以后，在上传文件成功后，停止原生js的loadding。我这就纳闷了，为什么不使用我安卓原生的去做？可能，是为了适配吧，为了更加好进行安卓了ios的开发吧，尽量不耦合这两个系统。</p>
<p>另外一个就是js调用本地java代码了。这个方法前面有介绍过，我就不多赘述了。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mWebView.addJavascriptInterface(<span class="keyword">new</span> DemoJavaScriptInterface(), <span class="string">"demo"</span>);</div></pre></td></tr></table></figure>
<p>有一个比较严重的问题就是，发布apk的时候，一般要对代码进行混淆。这样一来，js就找不到要调用的本地代码的地址或者引用了。正确的做法，就是那些要被js调用的本地类，不要加入到混淆的大队伍中去。</p>
<ul>
<li>webview使用CookieManager去进行cookie进行保存。进行预登录。</li>
<li>下午的时候，程序终于出问题了吧。webview网络错误的时候，屏蔽webview，然后显示自己定义的view。在恢复成功的时候，我选择在onPageFinished（）这里去恢复webview的显示，但是问题来了，这个回调方法是一直会被调用的，而且是比onReceivedError要后。寻找新的解决办法，办法。大坑来了哦，webview是真的很郁闷。</li>
<li>暂时找到忽悠的办法，就是判断webview的title，错误界面的title要么就是空的，要么就是url的链接。我投机取巧，通过webview的title去控制view的显示或者隐藏。</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span>(!view.getTitle().equals(<span class="string">""</span>) &amp;&amp; view.getTitle().length() &lt; <span class="number">20</span>)&#123;</div><div class="line">           mWebviewFragment.hideReloadingDialog();</div><div class="line">           mWebviewFragment.showErrorView(<span class="keyword">false</span>);</div><div class="line">       &#125;</div></pre></td></tr></table></figure>
<ul>
<li>出现兼容适配的问题了。webview是被改过了好多，在不同系统版本上面的手机，反应的都是不一样。正确的做法，我们是不是要换掉原生的webvie，继而使用腾讯家的产品去替代。</li>
</ul>
<h3 id="10-25-天气-晴"><a href="#10-25-天气-晴" class="headerlink" title="10-25 天气:晴"></a>10-25 天气:晴</h3><p>早上涉猎了一下安卓7.1的最新带来的shortcut功能，就是你在桌面长按图标，可以选择进去注册了shortcut的页面。可以静态写死，也可以动态注册。现在我有一个疑问就是，给了这个入口，没有登录就进去了，可不是糗大了。这个入口，还可以放到桌面上。但是问题来了，开发者无权删除用户放到桌面的东西，那么如果开发者删除了某个shortcut，再点击的时候，如何阻止app崩溃？在程序内部disable掉它，桌面就会变灰了。</p>
<ul>
<li>安卓6.0权限再详解。我学会了新的概念就是权限组。现在动态申请权限是去申请一个权限，那么这个app就能够拥有整个组的权限了。如果弹出多次请求框，用户竟然拒绝了，就是表明用户不希望app使用这个功能，死心吧。那么，我就觉得，应该会有一处地方解除这个永久拒绝的，应该就是在设置里面。</li>
<li>安卓的构建环境里面，已经包含了Proguard混淆技术，系统环境会在需要时候去调用。我们所要做的唯一一件事情就是写好混淆文件。</li>
<li>工作任务，使用js调用安卓原生的代码。在删除信息的时候，去触发原生的方法，回到消息的主页。</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//在js中调用，删除信息的时候，回到页面首页</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">JsCloseTitleBarObject</span></span>&#123;</div><div class="line">    <span class="meta">@JavascriptInterface</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">closeTitleBar</span><span class="params">()</span></span>&#123;</div><div class="line">      <span class="comment">//好像不能直接使用这个方法，我还是去乖乖地关掉顶部两个button就好了，做到通用。</span></div><div class="line">        goBackToHomePage();</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">mWebView.addJavascriptInterface(<span class="keyword">new</span> JsCloseTitleBarObject(),<span class="string">"closeTitleBar"</span>);</div></pre></td></tr></table></figure>
<p>踩坑了，现在的问题就是我们东西不是在主线程被调用，所以就失败了。js调用还好没有让程序崩溃。把操作的东西，提到主线程完事，就能够调用本地代码。</p>
<p>由此想到的策略的问题，何时去显示那个按钮，有页面计数器，也有标志位，但是你那里仅仅只是判断了webview是否可以跳转，是不是太草率。我要把这个给改正</p>
<p>经验总结一下，就是代码能够走进去函数那里，但是执行的时候就执行不下去了。而且是在操作view，那么就要小心是不是不在主线程了哟。</p>
<h3 id="10月26日-天气-晴"><a href="#10月26日-天气-晴" class="headerlink" title="10月26日 天气:晴"></a>10月26日 天气:晴</h3><ul>
<li>app配置的问题，又是比较纠结的一个问题。那些配置弄得可真的是蛋疼，没事抽那么多的库出来干什么。明显现在这里是很乱的一个库，我要大改一下。</li>
<li>没有一点工匠精神，自定义view竟然是写死的，差评，让同事去改好就行了。写活它，根据配置就写东西进去，要多少个tab就有多少个tab。</li>
<li>以后千万不要再用Application做单例，那样得不到Context的。正确去得到Context的方法。后者是正确的方法，前者只是一个单例，没什么卵用。</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">private</span> <span class="keyword">static</span> BaseApplication instance = <span class="keyword">null</span>;</div><div class="line"><span class="keyword">private</span> <span class="keyword">static</span> Context sContext;</div><div class="line"></div><div class="line"><span class="meta">@Override</span></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">()</span> </span>&#123;</div><div class="line">    <span class="keyword">super</span>.onCreate();</div><div class="line">    sContext = <span class="keyword">this</span>.getApplicationContext();</div><div class="line">    Report.init(<span class="keyword">this</span>);</div><div class="line">    initImageLoader(<span class="keyword">this</span>);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">synchronized</span> BaseApplication <span class="title">getInstance</span><span class="params">()</span> </span>&#123;</div><div class="line">    <span class="keyword">if</span> (<span class="keyword">null</span> == instance) &#123;</div><div class="line">        instance = <span class="keyword">new</span> BaseApplication();</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> instance;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Context <span class="title">getContext</span><span class="params">()</span></span>&#123;</div><div class="line">    <span class="keyword">return</span> sContext;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="10-27日-天气-晴"><a href="#10-27日-天气-晴" class="headerlink" title="10-27日 天气:晴"></a>10-27日 天气:晴</h3><p>今天也就是常规更新一下系统，奇迹般地发现了电脑的触摸板和键盘奇迹般地好了，撒花。好彩当初没有听修理店的老板，给1200出去，就修好了。对，重新装一下就赚到这个钱。我这种能用则用，对某些瑕疵问题采取看不见的态度，然后随着时间的推移，有些会奇迹般地编号。这就好像和罗胖讲过的中国目前的发展国情很像。中国发展中遇到的问题，先放一边，不管咯。等到以后有精力，想去管的时候，发现之前的问题已经不存在了，自然而然地消失了。</p>
<ul>
<li>自定义的view，同事那里给出的就是老生常谈的数组越界，说实话，对于这类问题的debug，我也不是很有技巧，只能去打印数据，一步一步去跟踪。</li>
<li>所谓线程安全，指的是当多个线程并发访问数据对象时，不会造成对数据对象的“破坏”。保证线程安全的一个基本思路就是让访问同一个数据对象的多个线程进行“排队”，一个接一个的来，这样就不会对数据造成破坏，但带来的代价是降低了并发性。</li>
<li>遇到兼容性的问题了。就是webview对h5的支持度很一般，好多h5的方法都是不支持的。现在要去寻找新的替代品，接入腾讯x5内核。好的。</li>
<li>对于腾讯x5内核的科研有了一定的阶段，但是不想用。</li>
</ul>
<h3 id="10-28日-天气-晴"><a href="#10-28日-天气-晴" class="headerlink" title="10-28日 天气:晴"></a>10-28日 天气:晴</h3><p>遇到大麻烦了，真的是可以这么说，在我第一次接触到这个问题的时候，真的是手足无措。首先，我不知道webview是去怎么样响应h5的文件选择的。后来查询了一下，是要在webChromeClient那里去重写一个方法的。我当时在犹豫什么？就是听到了路上有人说，有的手机不去响应这个代码，然后我就去找其他方法。神奇的x5，我以后再也不要去用了。有想过要去使用本地的js协议。但是就是前端那边改起来是太大的工程量了，加上，我连协议是怎么定义的还不清楚，怎么搞。想来想去，找到了群，群友们的帮助还是很大的。建议我不要去使用x5.然后说都会支持openFileChooser的，只有一点点的机子会不响应。我这时其实就可以去做了的，还在犹豫什么？后来还是找到了强哥吹逼了一下，最后还是重写那些方法，不要让前端的人搞太多。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">mWebViewFragment.mUploadMessage = uploadMsg;</div><div class="line">        Intent i = <span class="keyword">new</span> Intent(Intent.ACTION_GET_CONTENT);</div><div class="line">        i.addCategory(Intent.CATEGORY_OPENABLE);</div><div class="line">        i.setType(<span class="string">"image/*"</span>);</div><div class="line">        mWebViewFragment.startActivityForResult(Intent.createChooser(i, <span class="string">"File Chooser"</span>), FILECHOOSER_RESULTCODE);</div></pre></td></tr></table></figure>
<p>下面是回调，在用户cancel的时候，也要记得去清空引用。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">case</span> CustomWebChromeClient.FILECHOOSER_RESULTCODE:</div><div class="line">                    <span class="keyword">if</span> (<span class="keyword">null</span> == mUploadMessage)</div><div class="line">                        <span class="keyword">return</span>;</div><div class="line">                    Uri result = data == <span class="keyword">null</span> || resultCode != RESULT_OK ? <span class="keyword">null</span>: data.getData();</div><div class="line">                    mUploadMessage.onReceiveValue(result);</div><div class="line">                    mUploadMessage = <span class="keyword">null</span>;<span class="comment">//用户取消的时候，也应该去清空引用。</span></div><div class="line">                    <span class="keyword">break</span>;</div></pre></td></tr></table></figure></p>
<h3 id="10-31日-天气-阴"><a href="#10-31日-天气-阴" class="headerlink" title="10-31日 天气:阴"></a>10-31日 天气:阴</h3><p>一早上回来，我验证好了我的代码是可以进行文件选择的，所谓的bug，就这样会被解决了。这里是采取了一种叫什么思路呢？修改参数，不，应该是获取正确的参数传递进去。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">getFilePathFromUri</span><span class="params">(Context context, Uri uri)</span></span>&#123;</div><div class="line">        String selectedPath = <span class="keyword">null</span>;</div><div class="line">        <span class="keyword">final</span> String scheme = uri.getScheme();</div><div class="line">        <span class="keyword">if</span>(uri != <span class="keyword">null</span> &amp;&amp; scheme != <span class="keyword">null</span>)&#123;</div><div class="line">            <span class="keyword">if</span>(scheme.equals(ContentResolver.SCHEME_CONTENT))&#123;</div><div class="line">                Cursor cursor = context.getContentResolver().</div><div class="line">                        query(uri,<span class="keyword">null</span>,<span class="keyword">null</span>,<span class="keyword">null</span>,<span class="keyword">null</span>);</div><div class="line">                <span class="keyword">if</span>(cursor != <span class="keyword">null</span> &amp;&amp; cursor.moveToFirst())&#123;</div><div class="line">                    <span class="keyword">int</span>  columnIndex = cursor.getColumnIndexOrThrow(MediaStore.Images.Media.DATA);</div><div class="line">                    selectedPath = cursor.getString(columnIndex);</div><div class="line">                    <span class="comment">// Android 4.1 更改了SD的目录，sdcard映射到/storage/sdcard0</span></div><div class="line">                    <span class="keyword">if</span> (!selectedPath.startsWith(<span class="string">"/storage"</span>) &amp;&amp; !selectedPath.startsWith(<span class="string">"/mnt"</span>)) &#123;</div><div class="line">                        selectedPath = <span class="string">"/mnt"</span> + selectedPath;</div><div class="line">                    &#125;</div><div class="line">                    cursor.close();</div><div class="line">                &#125;</div><div class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span>(scheme.equals(ContentResolver.SCHEME_FILE))&#123;</div><div class="line">                selectedPath = uri.toString().replace(<span class="string">"file://"</span>,<span class="string">""</span>);</div><div class="line">                <span class="keyword">int</span> index = selectedPath.indexOf(<span class="string">"/sdcard"</span>);</div><div class="line">                selectedPath = index == -<span class="number">1</span> ? selectedPath:selectedPath.substring(index);</div><div class="line">                <span class="keyword">if</span>(!selectedPath.startsWith(<span class="string">"/mnt"</span>))&#123;</div><div class="line">                    selectedPath = selectedPath + <span class="string">"/mnt"</span>;</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> selectedPath;</div><div class="line">    &#125;</div></pre></td></tr></table></figure>
<ul>
<li>新学习到的知识点就是TextInputLayout的使用，这玩意是出自design包的，主要就是通过包裹一个输入框，然后可以把输入框中的hint显示在上角。下面是它的网址:<a href="http://mp.weixin.qq.com/s?__biz=MzA5MzI3NjE2MA==&amp;mid=2650237518&amp;idx=1&amp;sn=c2a8d2de0ddaa5783b7cc67dd37fc696&amp;chksm=88639b21bf141237b695212771dda4d46adc2469c809161dd590ea02b943daea4056011fb1f1&amp;scene=0#wechat_redirect" target="_blank" rel="external">TextInputLayout的使用</a></li>
<li>glide图片加载库学习。总结一下其最突出的特点：绑定宿主的生命周期；自动裁剪（弊端就是不同尺寸的view要使用这张图片的话，会去重新下载）；默认使用RGB_565模式，内存占用少；支持加载gif；添加缩略图支持（模糊图片），加载速度快，体验好；</li>
<li>看了别人的代码，懂得了一点建造者模式的使用。建造者模式就是暴露出去很多的接口，让用户设置不同的部件（但是会提供默认实现）。然后执行create方法，合并出一个完整的产品。create（）对每一个部件进行检查，没有被设置的部件，就提供默认实现。</li>
</ul>
  
	</div>
		<footer class="article-footer clearfix">
<div class="article-catetags">


  <div class="article-tags">
  
  <span></span> <a href="/tags/work/">work</a><a href="/tags/coding/">coding</a>
  </div>

</div>



	<div class="article-share" id="share">
	
	  <div data-url="http://yoursite.com/2016/10/12/Coding/2016-10工作笔记/2016-10-工作笔记/" data-title="2016-10-工作笔记 | Eric&#39;s Blog" data-tsina="null" class="share clearfix">
	  </div>
	
	</div>


</footer>

   	       
	</article>
	
<nav class="article-nav clearfix">
 
 <div class="prev" >
 <a href="/2016/11/11/Coding/11月工作笔记/" title="11月工作笔记">
  <strong>上一篇：</strong><br/>
  <span>
  11月工作笔记</span>
</a>
</div>


<div class="next">
<a href="/2016/09/14/Coding/2016-9笔记/2016-9笔记/"  title="2016-9笔记">
 <strong>下一篇：</strong><br/> 
 <span>2016-9笔记
</span>
</a>
</div>

</nav>

	

</div>  
      <div class="openaside"><a class="navbutton" href="#" title="显示侧边栏"></a></div>

  <div id="toc" class="toc-aside">
  <strong class="toc-title">文章目录</strong>
 
 <ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#10-9-天气-阴"><span class="toc-number">1.</span> <span class="toc-text">10-9 天气:阴</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10月10-天气-晴"><span class="toc-number">2.</span> <span class="toc-text">10月10 天气:晴</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10月11日-天气-晴"><span class="toc-number">3.</span> <span class="toc-text">10月11日 天气:晴</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-12-天气-阴雨"><span class="toc-number">4.</span> <span class="toc-text">10-12 天气:阴雨</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-13-天气-阴"><span class="toc-number">5.</span> <span class="toc-text">10-13 天气:阴</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-14-天气-阴"><span class="toc-number">6.</span> <span class="toc-text">10-14 天气:阴</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-17-天气-晴"><span class="toc-number">7.</span> <span class="toc-text">10-17 天气:晴</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-19日-天气-阴"><span class="toc-number">8.</span> <span class="toc-text">10-19日 天气: 阴</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-20日-天气-阴"><span class="toc-number">9.</span> <span class="toc-text">10-20日 天气:阴</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-21日-天气：阴"><span class="toc-number">10.</span> <span class="toc-text">10-21日 天气：阴</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-24日-天气-阴"><span class="toc-number">11.</span> <span class="toc-text">10-24日 天气:阴</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-25-天气-晴"><span class="toc-number">12.</span> <span class="toc-text">10-25 天气:晴</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10月26日-天气-晴"><span class="toc-number">13.</span> <span class="toc-text">10月26日 天气:晴</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-27日-天气-晴"><span class="toc-number">14.</span> <span class="toc-text">10-27日 天气:晴</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-28日-天气-晴"><span class="toc-number">15.</span> <span class="toc-text">10-28日 天气:晴</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-31日-天气-阴"><span class="toc-number">16.</span> <span class="toc-text">10-31日 天气:阴</span></a></li></ol>
 
  </div>

<div id="asidepart">
<div class="closeaside"><a class="closebutton" href="#" title="隐藏侧边栏"></a></div>
<aside class="clearfix">

  
<div class="github-card">
<p class="asidetitle">Github 名片</p>
<div class="github-card" data-github="https://github.com/Eric1235" data-width="220" data-height="119" data-theme="medium">
<script type="text/javascript" src="//cdn.jsdelivr.net/github-cards/latest/widget.js" ></script>
</div>
  </div>



  

  
<div class="tagslist">
	<p class="asidetitle">标签</p>
		<ul class="clearfix">
		
			
				<li><a href="/tags/life/" title="life">life<sup>7</sup></a></li>
			
		
			
				<li><a href="/tags/college/" title="college">college<sup>5</sup></a></li>
			
		
			
				<li><a href="/tags/work/" title="work">work<sup>4</sup></a></li>
			
		
			
				<li><a href="/tags/coding/" title="coding">coding<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/study/" title="study">study<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/me/" title="me">me<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/improve/" title="improve">improve<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/coding-android/" title="coding android">coding android<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/work-life/" title="-work -life">-work -life<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/work-coding/" title="-work -coding">-work -coding<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/fight/" title="fight">fight<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/sunshine/" title="sunshine">sunshine<sup>1</sup></a></li>
			
		
		</ul>
</div>


  <div class="linkslist">
  <p class="asidetitle">友情链接</p>
    <ul>
        
          <li>
            
            	<a href="https://coderq.com" target="_blank" title="一个面向程序员交流分享的新一代社区">码农圈</a>
            
          </li>
        
          <li>
            
            	<a href="http://wuchong.me" target="_blank" title="Jark&#39;s Blog">Jark&#39;s Blog</a>
            
          </li>
        
    </ul>
</div>

  


  <div class="rsspart">
	<a href="/atom.xml" target="_blank" title="rss">RSS 订阅</a>
</div>

  <div class="weiboshow">
  <p class="asidetitle">新浪微博</p>
    <iframe width="100%" height="119" class="share_self"  frameborder="0" scrolling="no" src="http://widget.weibo.com/weiboshow/index.php?language=&width=0&height=119&fansRow=2&ptype=1&speed=0&skin=9&isTitle=1&noborder=1&isWeibo=0&isFans=0&uid=null&verifier=b3593ceb&dpc=1"></iframe>
</div>


</aside>
</div>
    </div>
    <footer><div id="footer" >
	
	<div class="line">
		<span></span>
		<div class="author"></div>
	</div>
	
	
	<section class="info">
		<p> Be Fearless <br/>
			Be an Engineer</p>
	</section>
	 
	<div class="social-font" class="clearfix">
		
		<a href="http://weibo.com/2176287895" target="_blank" class="icon-weibo" title="微博"></a>
		
		
		<a href="https://github.com/https://github.com/Eric1235" target="_blank" class="icon-github" title="github"></a>
		
		
		
		<a href="https://twitter.com/https://twitter.com/ericli1235" target="_blank" class="icon-twitter" title="twitter"></a>
		
		
		<a href="https://www.facebook.com/https://www.facebook.com/lixinkun" target="_blank" class="icon-facebook" title="facebook"></a>
		
		
		
		
		
		
		<a href="mailto:Eric1235@gmail.com" target="_blank" class="icon-email" title="Email Me"></a>
		
	</div>
			
		

		<p class="copyright">
		Powered by <a href="http://hexo.io" target="_blank" title="hexo">hexo</a> and Theme by <a href="https://github.com/wuchong/jacman" target="_blank" title="Jacman">Jacman</a> © 2016 
		
		<a href="/about" target="_blank" title="Eric Li">Eric Li</a>
		
		
		</p>
</div>
</footer>
    <script src="/js/jquery-2.0.3.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>
<script src="/js/jquery.qrcode-0.12.0.min.js"></script>

<script type="text/javascript">
$(document).ready(function(){ 
  $('.navbar').click(function(){
    $('header nav').toggleClass('shownav');
  });
  var myWidth = 0;
  function getSize(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
  };
  var m = $('#main'),
      a = $('#asidepart'),
      c = $('.closeaside'),
      o = $('.openaside');
  c.click(function(){
    a.addClass('fadeOut').css('display', 'none');
    o.css('display', 'block').addClass('fadeIn');
    m.addClass('moveMain');
  });
  o.click(function(){
    o.css('display', 'none').removeClass('beforeFadeIn');
    a.css('display', 'block').removeClass('fadeOut').addClass('fadeIn');      
    m.removeClass('moveMain');
  });
  $(window).scroll(function(){
    o.css("top",Math.max(80,260-$(this).scrollTop()));
  });
  
  $(window).resize(function(){
    getSize(); 
    if (myWidth >= 1024) {
      $('header nav').removeClass('shownav');
    }else{
      m.removeClass('moveMain');
      a.css('display', 'block').removeClass('fadeOut');
      o.css('display', 'none');
      
      $('#toc.toc-aside').css('display', 'none');
        
    }
  });
});
</script>

<script type="text/javascript">
$(document).ready(function(){ 
  var ai = $('.article-content>iframe'),
      ae = $('.article-content>embed'),
      t  = $('#toc'),
      ta = $('#toc.toc-aside'),
      o  = $('.openaside'),
      c  = $('.closeaside');
  if(ai.length>0){
    ai.wrap('<div class="video-container" />');
  };
  if(ae.length>0){
   ae.wrap('<div class="video-container" />');
  };
  c.click(function(){
    ta.css('display', 'block').addClass('fadeIn');
  });
  o.click(function(){
    ta.css('display', 'none');
  });
  $(window).scroll(function(){
    ta.css("top",Math.max(140,320-$(this).scrollTop()));
  });
});
</script>


<script type="text/javascript">
$(document).ready(function(){ 
  var $this = $('.share'),
      url = $this.attr('data-url'),
      encodedUrl = encodeURIComponent(url),
      title = $this.attr('data-title'),
      tsina = $this.attr('data-tsina'),
      description = $this.attr('description');
  var html = [
  '<div class="hoverqrcode clearfix"></div>',
  '<a class="overlay" id="qrcode"></a>',
  '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="article-share-facebook" target="_blank" title="Facebook"></a>',
  '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="article-share-twitter" target="_blank" title="Twitter"></a>',
  '<a href="#qrcode" class="article-share-qrcode" title="微信"></a>',
  '<a href="http://widget.renren.com/dialog/share?resourceUrl=' + encodedUrl + '&srcUrl=' + encodedUrl + '&title=' + title +'" class="article-share-renren" target="_blank" title="人人"></a>',
  '<a href="http://service.weibo.com/share/share.php?title='+title+'&url='+encodedUrl +'&ralateUid='+ tsina +'&searchPic=true&style=number' +'" class="article-share-weibo" target="_blank" title="微博"></a>',
  '<span title="Share to"></span>'
  ].join('');
  $this.append(html);

  $('.hoverqrcode').hide();

  var myWidth = 0;
  function updatehoverqrcode(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
    var qrsize = myWidth > 1024 ? 200:100;
    var options = {render: 'image', size: qrsize, fill: '#2ca6cb', text: url, radius: 0.5, quiet: 1};
    var p = $('.article-share-qrcode').position();
    $('.hoverqrcode').empty().css('width', qrsize).css('height', qrsize)
                          .css('left', p.left-qrsize/2+20).css('top', p.top-qrsize-10)
                          .qrcode(options);
  };
  $(window).resize(function(){
    $('.hoverqrcode').hide();
  });
  $('.article-share-qrcode').click(function(){
    updatehoverqrcode();
    $('.hoverqrcode').toggle();
  });
  $('.article-share-qrcode').hover(function(){}, function(){
      $('.hoverqrcode').hide();
  });
});   
</script>









<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
$(document).ready(function(){ 
  $('.article-content').each(function(i){
    $(this).find('img').each(function(){
      if ($(this).parent().hasClass('fancybox')) return;
      var alt = this.alt;
      if (alt) $(this).after('<span class="caption">' + alt + '</span>');
      $(this).wrap('<a href="' + this.src + '" title="' + alt + '" class="fancybox"></a>');
    });
    $(this).find('.fancybox').each(function(){
      $(this).attr('rel', 'article' + i);
    });
  });
  if($.fancybox){
    $('.fancybox').fancybox();
  }
}); 
</script>



<!-- Analytics Begin -->



<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?e6d1f421bbc9962127a50488f9ed37d1";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>



<!-- Analytics End -->

<!-- Totop Begin -->

	<div id="totop">
	<a title="返回顶部"><img src="/img/scrollup.png"/></a>
	</div>
	<script src="/js/totop.js"></script>

<!-- Totop End -->

<!-- MathJax Begin -->
<!-- mathjax config similar to math.stackexchange -->


<!-- MathJax End -->

<!-- Tiny_search Begin -->

<!-- Tiny_search End -->

  </body>
</html>
