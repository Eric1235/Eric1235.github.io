
 <!DOCTYPE HTML>
<html lang="zh-CN">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
  
    <title>2017-9月工作笔记 | Eric&#39;s Blog</title>
    <meta name="viewport" content="width=device-width, initial-scale=1,user-scalable=no">
    
    <meta name="author" content="Eric Li">
    

    
    <meta name="description" content="9月2日 天气:阴 一开始的问题就是新项目部署，代码没有合并导致不能使用，排查了n久，过。 系统里面存在着普通用户，在店铺注册的时候，需要去对这类用户开放注册的权限">
<meta property="og:type" content="article">
<meta property="og:title" content="2017-9月工作笔记">
<meta property="og:url" content="http://yoursite.com/2017/10/10/2017/2017-9月工作笔记/index.html">
<meta property="og:site_name" content="Eric&#39;s Blog">
<meta property="og:description" content="9月2日 天气:阴 一开始的问题就是新项目部署，代码没有合并导致不能使用，排查了n久，过。 系统里面存在着普通用户，在店铺注册的时候，需要去对这类用户开放注册的权限">
<meta property="og:locale" content="zh-CN">
<meta property="og:updated_time" content="2018-12-29T04:34:30.187Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="2017-9月工作笔记">
<meta name="twitter:description" content="9月2日 天气:阴 一开始的问题就是新项目部署，代码没有合并导致不能使用，排查了n久，过。 系统里面存在着普通用户，在店铺注册的时候，需要去对这类用户开放注册的权限">
<meta name="twitter:creator" content="@ericli1235">
<link rel="publisher" href="Eric1235">

    
    <link rel="alternative" href="/atom.xml" title="Eric&#39;s Blog" type="application/atom+xml">
    
    
    <link rel="icon" href="/img/favicon.ico">
    
    
    <link rel="apple-touch-icon" href="/img/jacman.jpg">
    <link rel="apple-touch-icon-precomposed" href="/img/jacman.jpg">
    
    <link rel="stylesheet" href="/css/style.css">
</head>
</html>
  <body>
    <header>
      
<div>
		
			<div id="imglogo">
				<a href="/"><img src="/img/logo.png" alt="Eric&#39;s Blog" title="Eric&#39;s Blog"></a>
			</div>
			
			<div id="textlogo">
				<h1 class="site-name"><a href="/" title="Eric&#39;s Blog">Eric&#39;s Blog</a></h1>
				<h2 class="blog-motto"></h2>
			</div>
			<div class="navbar"><a class="navbutton navmobile" href="#" title="菜单">
			</a></div>
			<nav class="animated">
				<ul>
					<ul>
					 
						<li><a href="/">Home</a></li>
					
						<li><a href="/archives">Archives</a></li>
					
						<li><a href="/about">About</a></li>
					
					<li>
 					
					<form class="search" action="//google.com/search" method="get" accept-charset="utf-8">
						<label>Search</label>
						<input type="search" id="search" name="q" autocomplete="off" maxlength="20" placeholder="搜索">
						<input type="hidden" name="q" value="site:yoursite.com">
					</form>
					
					</li>
				</ul>
			</ul></nav>			
</div>
    </header>
    <div id="container">
      <div id="main" class="post" itemscope="" itemprop="blogPost">
  
	<article itemprop="articleBody"> 
		<header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2017/10/10/2017/2017-9月工作笔记/" title="2017-9月工作笔记" itemprop="url">2017-9月工作笔记</a>
  </h1>
  <p class="article-author">By
       
		<a href="https://plus.google.com/Eric1235?rel=author" title="Eric Li" target="_blank" itemprop="author">Eric Li</a>
		
  </p><p class="article-time">
    <time datetime="2017-10-10T02:41:06.000Z" itemprop="datePublished"> 发表于 2017-10-10</time>
    
  </p>
</header>
	<div class="article-content">
		
		<div id="toc" class="toc-article">
			<strong class="toc-title">文章目录</strong>
		
			<ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#9月2日-天气-阴"><span class="toc-number">1.</span> <span class="toc-text">9月2日 天气:阴</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9月6日-天气-雨"><span class="toc-number">2.</span> <span class="toc-text">9月6日 天气:雨</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9月7日-天气-雨"><span class="toc-number">3.</span> <span class="toc-text">9月7日 天气:雨</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9月8日-天气-阴"><span class="toc-number">4.</span> <span class="toc-text">9月8日 天气:阴</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9月11日-天气-阴"><span class="toc-number">5.</span> <span class="toc-text">9月11日 天气:阴</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9月12日-天气-晴"><span class="toc-number">6.</span> <span class="toc-text">9月12日 天气:晴</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9月13日-天气-阴"><span class="toc-number">7.</span> <span class="toc-text">9月13日 天气:阴</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9月14日-天气-晴"><span class="toc-number">8.</span> <span class="toc-text">9月14日 天气:晴</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9月15日-天气-晴"><span class="toc-number">9.</span> <span class="toc-text">9月15日 天气:晴</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9月16日-天气-晴"><span class="toc-number">10.</span> <span class="toc-text">9月16日 天气:晴</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9月17日-天气-晴"><span class="toc-number">11.</span> <span class="toc-text">9月17日 天气:晴</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9月18日-天气-晴"><span class="toc-number">12.</span> <span class="toc-text">9月18日 天气:晴</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9月21日-天气-晴"><span class="toc-number">13.</span> <span class="toc-text">9月21日 天气:晴</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9月22日-天气-晴"><span class="toc-number">14.</span> <span class="toc-text">9月22日 天气:晴</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9月23日-天气-晴"><span class="toc-number">15.</span> <span class="toc-text">9月23日 天气:晴</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9月27日-天气-晴"><span class="toc-number">16.</span> <span class="toc-text">9月27日 天气:晴</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9月28日-天气-晴"><span class="toc-number">17.</span> <span class="toc-text">9月28日 天气:晴</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9月30日-天气-晴"><span class="toc-number">18.</span> <span class="toc-text">9月30日 天气:晴</span></a></li></ol>
		
		</div>
		
		<h2 id="9月2日-天气-阴"><a href="#9月2日-天气-阴" class="headerlink" title="9月2日 天气:阴"></a>9月2日 天气:阴</h2><ul>
<li>一开始的问题就是新项目部署，代码没有合并导致不能使用，排查了n久，过。</li>
<li>系统里面存在着普通用户，在店铺注册的时候，需要去对这类用户开放注册的权限</li>
</ul>
<a id="more"></a>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="9月6日-天气-雨"><a href="#9月6日-天气-雨" class="headerlink" title="9月6日 天气:雨"></a>9月6日 天气:雨</h2><ul>
<li>踩坑了啊，我这边一直渲染不上去，原来是数据初始化出现了问题。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> vm = avalon.define(&#123;</span><br><span class="line">               $id: <span class="string">"answer"</span>,  <span class="comment">//vm</span></span><br><span class="line">               questionList: [],<span class="comment">//问题list</span></span><br><span class="line">               examName: <span class="string">"$&#123;examName&#125;"</span>, <span class="comment">//考试名称,这样就是把数据给初始化完毕了，后面挺难改动的</span></span><br><span class="line">               questionNum: <span class="string">''</span>, <span class="comment">//试题数目</span></span><br><span class="line">               examUserHistoryId: examUserHistoryId, <span class="comment">//考试记录id</span></span><br><span class="line">               userId: userId,</span><br><span class="line">               examId: examId,</span><br><span class="line">               answerNum: answerNum,<span class="comment">//已经作答的题目数量</span></span><br><span class="line">               answerSheet: [], <span class="comment">//自己的答案</span></span><br><span class="line">               curPage: <span class="string">'1'</span>,</span><br><span class="line">               curQuestion: <span class="number">0</span>,</span><br><span class="line">               lastPosition: <span class="number">0</span>,</span><br><span class="line">             &#125;)</span><br></pre></td></tr></table></figure>
<h2 id="9月7日-天气-雨"><a href="#9月7日-天气-雨" class="headerlink" title="9月7日 天气:雨"></a>9月7日 天气:雨</h2><ul>
<li>不要去搞神马外键，那个是级联的更新。所有的外键，应该自己在应用层弄表的关联</li>
<li>前端使用windom.open去打开新的窗口，渲染新的页面。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">createOrEditPaper: <span class="function"><span class="keyword">function</span> (<span class="params">examPaperId</span>) </span>&#123;</span><br><span class="line">                <span class="keyword">var</span> redirectUtl = <span class="string">'exams/paper/design'</span>;</span><br><span class="line">                <span class="comment">//携带id跳转到试卷页面</span></span><br><span class="line">                <span class="built_in">window</span>.open(basePath + redirectUtl + <span class="string">"?examPaperId="</span> + <span class="number">1</span>);</span><br><span class="line">            &#125;,</span><br></pre></td></tr></table></figure>
<h2 id="9月8日-天气-阴"><a href="#9月8日-天气-阴" class="headerlink" title="9月8日 天气:阴"></a>9月8日 天气:阴</h2><ul>
<li>短信问题踩坑，不是根据id去匹配，要的是根据整个内容的匹配度达到60%以上，就行了。</li>
</ul>
<h2 id="9月11日-天气-阴"><a href="#9月11日-天气-阴" class="headerlink" title="9月11日 天气:阴"></a>9月11日 天气:阴</h2><ul>
<li>之前也是一直困扰我的问题，就是如何去控制元素的显示或者隐藏？使用了avalon以后，看到了这个ms-visiable标签，还支持表达式。瞬间就兴起了</li>
</ul>
<h2 id="9月12日-天气-晴"><a href="#9月12日-天气-晴" class="headerlink" title="9月12日 天气:晴"></a>9月12日 天气:晴</h2><ul>
<li>使用avalon编写一个过滤器。avalon默认会把用户的数据当做第一个参数来使用。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//自己手动传递的，只有第二和第三个参数</span></span><br><span class="line">&lt;div&gt;&#123;&#123;@aaa | truncate(<span class="number">10</span>, <span class="string">'...'</span>)&#125;&#125;&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">avalon.filters.truncate = function (str, length, truncation) &#123;</span></span><br><span class="line"><span class="regexp">    /</span><span class="regexp">/length，新字符串长度，truncation，新字符串的结尾的字段,返回新字符串</span></span><br><span class="line"><span class="regexp">    length = length || 30</span></span><br><span class="line"><span class="regexp">    truncation = typeof truncation === "string" ? truncation : "..."</span></span><br><span class="line"><span class="regexp">    return str.length &gt; length ?</span></span><br><span class="line"><span class="regexp">            str.slice(0, length - truncation.length) + truncation :</span></span><br><span class="line"><span class="regexp">            String(str)</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>maven引入jar包的另外一种写法，把版本号抽离出来，方便管理。</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">commons-lang3.version</span>&gt;</span>3.4<span class="tag">&lt;/<span class="name">commons-lang3.version</span>&gt;</span></span><br><span class="line">       ...</span><br><span class="line"><span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 然后在依赖那里引用版本 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependencyManagement</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.commons<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-lang3<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;commons-lang3.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencyManagement</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>springmav向spring boot转移。把web.xml中的所有bean，在java的@Configuration注解下面，一个一个写成bean。</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//xml向java转化</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ServletConfiguration</span> <span class="keyword">extends</span> <span class="title">WebMvcConfigurerAdapter</span> </span>&#123;</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">  * &lt;bean class="org.springframework.web.servlet.view.InternalResourceViewResolver" p:prefix="/jsp/" p:suffix=".jsp"/&gt;</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"> <span class="meta">@Bean</span></span><br><span class="line"> <span class="function"><span class="keyword">public</span> ViewResolver <span class="title">viewResolver</span><span class="params">()</span> </span>&#123;</span><br><span class="line">     InternalResourceViewResolver resolver = <span class="keyword">new</span> InternalResourceViewResolver();</span><br><span class="line">     resolver.setPrefix(<span class="string">"/jsp/"</span>);</span><br><span class="line">     resolver.setSuffix(<span class="string">".jsp"</span>);</span><br><span class="line">     resolver.setExposeContextBeansAsAttributes(<span class="keyword">true</span>);</span><br><span class="line">     <span class="keyword">return</span> resolver;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * &lt;!--异常处理--&gt;</span></span><br><span class="line"><span class="comment">     * &lt;bean id="exceptionHandler" class="cn.zhubaoyi.api.web.handler.SysExceptionHandler"/&gt;</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span>(name = <span class="string">"exceptionHandler"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> SysExceptionHandler <span class="title">exceptionHandler</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> SysExceptionHandler();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>带有微服务的spring boot启动类</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@EnableFeignClients</span>(basePackages = <span class="string">"com.yibaotong.pangu.pc.server.ms"</span>)</span><br><span class="line"><span class="meta">@EnableDiscoveryClient</span></span><br><span class="line"><span class="meta">@ComponentScan</span>(basePackages = &#123;<span class="string">"com.yibaotong.pangu.pc"</span>, <span class="string">"com.yibaotong.pangu.cache"</span>, <span class="string">"com.yibaotong.pangu.service"</span>,</span><br><span class="line">        <span class="string">"com.yibaotong.commons.cache.component"</span>, <span class="string">"com.yibaotong.commons.service"</span>&#125;)</span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@EnableAspectJAutoProxy</span>(proxyTargetClass = <span class="keyword">true</span>,exposeProxy = <span class="keyword">true</span>)</span><br><span class="line"><span class="meta">@EnableScheduling</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Application</span> <span class="keyword">extends</span> <span class="title">SpringBootServletInitializer</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> SpringApplicationBuilder <span class="title">configure</span><span class="params">(SpringApplicationBuilder builder)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 注意这里要指向原先用main方法执行的Application启动类</span></span><br><span class="line">        <span class="keyword">return</span> builder.sources(Application.class);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        SpringApplication.run(Application.class, args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="9月13日-天气-阴"><a href="#9月13日-天气-阴" class="headerlink" title="9月13日 天气:阴"></a>9月13日 天气:阴</h2><ul>
<li>困扰了多天的问题，短信发不出去就是因为模板没有同步到正式环境。以后遇到两个环境不同表现的时候，先要去检查各自的配置有什么不同</li>
</ul>
<h2 id="9月14日-天气-晴"><a href="#9月14日-天气-晴" class="headerlink" title="9月14日 天气:晴"></a>9月14日 天气:晴</h2><ul>
<li>紧急修复了类型多个新增的问题.每次新增都会新增类型，我在后台做了去重。</li>
<li>自己动手引入了微服务，增加了feign的这个jar包，启动的application就增加相应的注解。</li>
<li>@MapperScan 注解是mybatis的注解，设置扫描mybatis的mapper包路径。</li>
</ul>
<h2 id="9月15日-天气-晴"><a href="#9月15日-天气-晴" class="headerlink" title="9月15日 天气:晴"></a>9月15日 天气:晴</h2><ul>
<li>自己的事情还是自己做，丑就丑把，好过用户二次点击保存。我加上蒙版，屏蔽了所有交互。</li>
<li>页面扫码：接口给出一个uuid，移动端扫描得到这个uuid，然后填写信息提交到后台登录接口。后台先验证uuid，如果uuid通过，再去进行登录。登录成功以后，返回结果给移动端。那前端怎么办？前端就自己设置一个定时器，定时去轮询这个uuid有没有被登录成功。如果登录成功，后台重定向到登录成功后的页面。</li>
<li>页面二维码扫码登录，是页面每隔一定时间（3秒）去轮询一个接口。登录成功以后，进行跳转，其实就是reload，后台根据是否登录成功，进行重定向到页面。</li>
<li>页面的filePath，basePath这些，都是从session中拿到的。每次进行页面请求的时候，使用一个初始化过滤器，去session那里注入这两个attribute。</li>
<li>还有的就是登录过滤器，也需要判断某个页面是否要登录，这个主要就是去session去拿登录信息，如果session中没有，就拒绝通过。</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//我只是关注，这里可以获得方法中的注解</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">boolean</span> <span class="title">requiredAuth</span><span class="params">(HandlerMethod handlerMethod)</span> </span>&#123;</span><br><span class="line">       Authorization methodAnnotation = handlerMethod.getMethodAnnotation(Authorization.class);</span><br><span class="line">       <span class="keyword">if</span> (methodAnnotation != <span class="keyword">null</span>) &#123;</span><br><span class="line">           <span class="keyword">return</span> methodAnnotation.required();</span><br><span class="line">       &#125;</span><br><span class="line">       Authorization classAnnotation = handlerMethod.getBeanType().getAnnotation(Authorization.class);</span><br><span class="line">       <span class="keyword">if</span> (classAnnotation != <span class="keyword">null</span>) &#123;</span><br><span class="line">           <span class="keyword">return</span> classAnnotation.required();</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>给方法注入一些信息。从session中获得登录信息，然后通过注解，注入到方法的变量中。类似这种接口</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span>(value = <span class="string">"/paper/design"</span>, method = RequestMethod.GET)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toDesignPage</span><span class="params">(@RequestParam(value = <span class="string">"examPaperId"</span>, required = <span class="keyword">false</span>, defaultValue = <span class="string">"0"</span>)</span> <span class="keyword">long</span> examPaperId, Model model,</span></span><br><span class="line"><span class="function">                                   @CurrentAuthentication AuthenticationInfo authenticationInfo)</span></span><br></pre></td></tr></table></figure>
<ul>
<li>现在说一下那个答题时长的问题，可以把试卷存储在session那里，进入答题页面的时候，session设置一个startTime的值，结束时间就是点击提交按钮的那个时间。点击结束按钮，就获取答题结束的时间戳。然后把这两个时间提交到后台。HttpSession目前是能够存储LocalDateTime的</li>
</ul>
<h2 id="9月16日-天气-晴"><a href="#9月16日-天气-晴" class="headerlink" title="9月16日 天气:晴"></a>9月16日 天气:晴</h2><ul>
<li>软删除的时候，请求方法可以使用patch。</li>
<li>搜索的优化，可以是每一秒就自动搜一下，这样频度就不会太高，服务器压力不会太大。搜索内容，去掉空格。</li>
<li>异步的方法要放到controller？发邮件，短信，推送消息这些，需要使用异步方法。</li>
<li>@RequestMapping那里，请求方法是可以给出多个的。比如get和patch共存。</li>
<li>微服务传递的数据类型，也是可以直接传递枚举过去的。</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//使用@RequesParam这个注解即可，不是使用@RequestBody</span></span><br><span class="line"><span class="function">Result&lt;OsOperatorAccount&gt; <span class="title">getByUserId</span><span class="params">(@RequestParam(value = <span class="string">"terminalType"</span>)</span> SysEnum.TerminalType terminalType,</span></span><br><span class="line"><span class="function">                                          @<span class="title">RequestParam</span><span class="params">(value = <span class="string">"userId"</span>)</span> <span class="keyword">long</span> userId)</span></span><br></pre></td></tr></table></figure>
<ul>
<li>点击全部试卷的时候，清空搜索框内容</li>
</ul>
<h2 id="9月17日-天气-晴"><a href="#9月17日-天气-晴" class="headerlink" title="9月17日 天气:晴"></a>9月17日 天气:晴</h2><ul>
<li>自己无故，还是不要去改别人的代码。改了，还要进行测试。</li>
</ul>
<h2 id="9月18日-天气-晴"><a href="#9月18日-天气-晴" class="headerlink" title="9月18日 天气:晴"></a>9月18日 天气:晴</h2><ul>
<li>如果参数不加东西，那么就是body类型，但是post请求当中，只有一个body内容，多个参数不加@RequestParam注解的话，就会报错。</li>
<li>应对大量突发访问类的问题，可以有3种优化思路：写入内存而不是写入硬盘；异步处理而不是同步处理；分布式处理</li>
<li>跨界一下，写php代码，但是思路是一样的</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//基础数据的生成</span></span><br><span class="line">$num = <span class="number">10</span>;<span class="comment">//实际的库存</span></span><br><span class="line">$len = Redis::llen(<span class="string">'goods_store:1'</span>);<span class="comment">//检查库存</span></span><br><span class="line">$count = $num - $len;<span class="comment">//剩余可用库存</span></span><br><span class="line"><span class="keyword">for</span>($i = <span class="number">0</span> ; $i &lt; $count ; $i ++) &#123;</span><br><span class="line">  Redis::lpush(<span class="string">'goods_store:1'</span>, <span class="number">1</span>); <span class="comment">//初始化未抢购的库存</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>抢购的时间到</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//这个还是会出现问题，一个用户可能可以抢购多个，是否可以再加多一个排队队列</span></span><br><span class="line">$user_id = Session::get(<span class="string">'user_id'</span>);</span><br><span class="line">$queResult = Redis::lpush(<span class="string">'user_queue:1'</span>, $user_id);</span><br><span class="line"><span class="keyword">new</span> Thread(&#123;</span><br><span class="line">  $successResult = Redis::lpop(<span class="string">'$user_id'</span>);</span><br><span class="line">  <span class="keyword">if</span> ($successResult) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">'你已经购买过了'</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line">$count = Redis::lpop(<span class="string">'goods_store:1'</span>);</span><br><span class="line"><span class="keyword">if</span> (!$count) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">'已经抢光了哦'</span>;</span><br><span class="line">&#125;</span><br><span class="line">$result = Redis::lpush(<span class="string">'order:1'</span>, $user_id);</span><br><span class="line"><span class="comment">//下面处理抢购成功的流程，开启新的线程</span></span><br><span class="line">DB::table(<span class="string">'goods'</span>)-&gt;decrement(<span class="string">'num'</span>, <span class="number">1</span>);</span><br></pre></td></tr></table></figure>
<ul>
<li>下面学习一下Redis的锁</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RedisLock</span> </span>&#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">boolean</span> lock = <span class="keyword">false</span>;</span><br><span class="line">  <span class="keyword">private</span> String key;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String LOCKED = <span class="string">"lock"</span>;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">lock</span> <span class="params">(<span class="keyword">long</span> timeout, <span class="keyword">long</span> expire)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">long</span> time = System.nanoTime();</span><br><span class="line">    timeout * = MILL_NANO_TIME;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="keyword">while</span>(System.nanoTime() - nanoTime &lt; timeout) &#123;</span><br><span class="line">        <span class="keyword">if</span> (redisClient.setnx(key, LOCKED) == <span class="number">1</span>) &#123;</span><br><span class="line">          redisClient.expire(key, expire);</span><br><span class="line">          <span class="keyword">this</span>.lock = <span class="keyword">true</span>;</span><br><span class="line">          <span class="keyword">return</span> <span class="keyword">this</span>.lock;</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">"出现锁等待"</span>);</span><br><span class="line">        Thread.sleep(<span class="number">3</span>, RANDOM.nextInt(<span class="number">30</span>));</span><br><span class="line">      &#125;</span><br><span class="line">    &#125; <span class="keyword">catch</span>(Exception e) &#123;</span><br><span class="line">      <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(<span class="string">"locking error"</span>, e);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">unlock</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">try</span>&#123;</span><br><span class="line">      <span class="keyword">if</span> (!<span class="keyword">this</span>.lock) &#123;</span><br><span class="line">        redisClient.delKey(key);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125; <span class="keyword">catch</span>(Throwable e) &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>jq语法学习</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//将创建好的节点添加到body</span></span><br><span class="line">$(<span class="string">"&lt;div&gt;&lt;p&gt;Hello&lt;/p&gt;&lt;/div&gt;"</span>).appendTo(<span class="string">'body'</span>);</span><br><span class="line"></span><br><span class="line">$(<span class="string">"&lt;div&gt;"</span>, &#123;</span><br><span class="line">  <span class="string">"class"</span>: <span class="string">"test"</span>,</span><br><span class="line">  text: <span class="string">"Click me!"</span>,</span><br><span class="line">  click: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    $(<span class="keyword">this</span>).toggleClass(<span class="string">"test"</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;).appendTo(<span class="string">"body"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//文档渲染完毕之后</span></span><br><span class="line">$(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//可以使用return false来跳出循环</span></span><br><span class="line">$(<span class="string">"img"</span>).each(<span class="function"><span class="keyword">function</span>(<span class="params">i</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.src = <span class="string">"test"</span> + i + <span class="string">".jpg"</span>;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//结果</span></span><br><span class="line">&lt;img src=<span class="string">"test0.jpg"</span>/&gt;<span class="xml"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"test1.jpg"</span>/&gt;</span></span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">$("div:contains('John')") //查找包含‘John’的div</span></span><br></pre></td></tr></table></figure>
<h2 id="9月21日-天气-晴"><a href="#9月21日-天气-晴" class="headerlink" title="9月21日 天气:晴"></a>9月21日 天气:晴</h2><ul>
<li>net::ERR_CONNECTION_RESET 问题排查，是后台限制了传输的大小，改小一点就好了。</li>
<li>上传图片那里，选择同步上传，不需要点击按钮进行上传了。</li>
</ul>
<h2 id="9月22日-天气-晴"><a href="#9月22日-天气-晴" class="headerlink" title="9月22日 天气:晴"></a>9月22日 天气:晴</h2><ul>
<li>LocalDateTime的日期格式化方式</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">LocalDateTime.now().format(DateTimeFormatter.ofPattern(<span class="string">"yyyyMMdd"</span>));</span><br></pre></td></tr></table></figure>
<ul>
<li>jq学习</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//为dom设置多个属性</span></span><br><span class="line">$(<span class="string">"img"</span>).attr(&#123; <span class="attr">src</span>: <span class="string">"test.jpg"</span>, <span class="attr">alt</span>: <span class="string">"Test Image"</span> &#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//禁用页面上的所有复选框</span></span><br><span class="line">$(<span class="string">"input[type='checkbox']"</span>).prop(&#123;</span><br><span class="line">  disabled: <span class="literal">true</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> count = <span class="number">0</span>;</span><br><span class="line">$(<span class="string">"p"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  $(<span class="keyword">this</span>).toggleClass(<span class="string">"highlight"</span>, count++ %<span class="number">3</span> == <span class="number">0</span>);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<ul>
<li>安卓补充</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//webview获取js的函数返回值</span></span><br><span class="line">webview.evaluateJavascript(<span class="string">"javascript:getDeviceID()"</span>, <span class="keyword">new</span> ValueCallback&lt;String&gt;() &#123;</span><br><span class="line">                   <span class="meta">@Override</span></span><br><span class="line">                   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onReceiveValue</span><span class="params">(String s)</span> </span>&#123;</span><br><span class="line">                       Log.d(<span class="string">"zzp"</span>, <span class="string">"--s--="</span> + s);</span><br><span class="line">                   &#125;</span><br><span class="line">               &#125;);</span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>Hello<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">$("p").unwrap();</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>Hello<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"container"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"inner"</span>&gt;</span>Hello<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"inner"</span>&gt;</span>Goodbye<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">$(".inner").wrapInner(function() &#123;</span><br><span class="line">  return '<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"' + $(this).text() + '"</span> /&gt;</span>';</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 对内层进行包裹 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"container"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"inner"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"Hello"</span>&gt;</span>Hello<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"inner"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"Goodbye"</span>&gt;</span>Goodbye<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 对立面的内容进行清空 --&gt;</span></span><br><span class="line">$(".inner").empty();</span><br></pre></td></tr></table></figure>
<ul>
<li>bug的修复之重复创建问题，我能够新建试卷以后返回新的试卷id，偏偏忘记了也要返回问题的id列表，导致了问题多次被创建。解决办法就是返回问题id，然后前端对问题的id进行刷新。</li>
</ul>
<h2 id="9月23日-天气-晴"><a href="#9月23日-天气-晴" class="headerlink" title="9月23日 天气:晴"></a>9月23日 天气:晴</h2><ul>
<li>之前使用表达式去做试卷答案的展示，并不能解决多选问题的显示，所以，这里我选用了另外一种方式去实现这个功能，下面是代码</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * 获取答案展示的选项,从jsonObject转换成为jsonArray</span></span><br><span class="line"><span class="comment">  * sourceOptionObject</span></span><br><span class="line"><span class="comment">  * status说明： 0 空白 1 正确但未选 2 选择正确 3 选择错误</span></span><br><span class="line"><span class="comment">  * 一层一层往上去叠加</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line">  getShowOptionList: <span class="function"><span class="keyword">function</span> (<span class="params">sourceOptionObject, myAnswer, answerSet</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">var</span> optionList = [];</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">var</span> key <span class="keyword">in</span> sourceOptionObject) &#123;</span><br><span class="line">          <span class="keyword">var</span> option = &#123;&#125;;</span><br><span class="line">          option.optionKey = key;</span><br><span class="line">          option.optionValue = sourceOptionObject[key];</span><br><span class="line">          option.status = <span class="number">0</span>;<span class="comment">//默认给个0</span></span><br><span class="line">          <span class="comment">//处理正确答案</span></span><br><span class="line">          <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span> ; i &lt; answerSet.length ; i ++) &#123;</span><br><span class="line">              <span class="keyword">if</span> (answerSet[i] == key) &#123;</span><br><span class="line">                  option.status = <span class="number">1</span>;<span class="comment">//把正确答案钉上去</span></span><br><span class="line">              &#125;</span><br><span class="line">          &#125;</span><br><span class="line">          <span class="comment">//处理我的答案</span></span><br><span class="line">          <span class="keyword">for</span> (<span class="keyword">var</span> j = <span class="number">0</span> ; j &lt; myAnswer.length ; j ++) &#123;</span><br><span class="line">              <span class="keyword">if</span> (key == myAnswer[j] &amp;&amp; option.status == <span class="number">1</span>) &#123;</span><br><span class="line">                  option.status = <span class="number">2</span>;<span class="comment">//正确</span></span><br><span class="line">              &#125; <span class="keyword">else</span> <span class="keyword">if</span> (key == myAnswer[j] &amp;&amp; option.status == <span class="number">0</span>) &#123;</span><br><span class="line">                  option.status = <span class="number">3</span>;<span class="comment">//错误</span></span><br><span class="line">              &#125;</span><br><span class="line">          &#125;</span><br><span class="line">          optionList.push(option);</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> optionList;</span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure>
<p>以后就只要使用如下的前端代码去展示即可，无需再做多一套</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">ms-for</span>=<span class="string">"(option) in el.newOptionList"</span> <span class="attr">class</span>=<span class="string">"answer-option"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"flex-row"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">%--</span> 错误选项 <span class="attr">--</span>%&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">ms-if</span>=<span class="string">"option.status == 3"</span> <span class="attr">class</span>=<span class="string">"answer-option-icon icon-answer-false"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">%--自选正确选项--%</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">ms-if</span>=<span class="string">"option.status == 2"</span> <span class="attr">class</span>=<span class="string">"answer-option-icon icon-answer-true"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">%--未选正确答案--%</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">div</span> <span class="attr">ms-if</span>=<span class="string">"option.status == 1"</span> <span class="attr">class</span>=<span class="string">"answer-option-icon selected"</span>&gt;</span>&#123;&#123;option.optionKey&#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">%--空白未选选项--%</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">ms-if</span>=<span class="string">"option.status == 0"</span> <span class="attr">class</span>=<span class="string">"answer-option-icon"</span>&gt;</span>&#123;&#123;option.optionKey&#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"flex-data"</span>&gt;</span>&#123;&#123;option.optionValue&#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="9月27日-天气-晴"><a href="#9月27日-天气-晴" class="headerlink" title="9月27日 天气:晴"></a>9月27日 天气:晴</h2><ul>
<li>事务里面，调用的方法不能加异步？</li>
<li>这个是异步方法的返回值，不能是有返回值</li>
</ul>
<h2 id="9月28日-天气-晴"><a href="#9月28日-天气-晴" class="headerlink" title="9月28日 天气:晴"></a>9月28日 天气:晴</h2><ul>
<li>myBatis的查询参数，基本类型最好是使用封装类型。</li>
</ul>
<h2 id="9月30日-天气-晴"><a href="#9月30日-天气-晴" class="headerlink" title="9月30日 天气:晴"></a>9月30日 天气:晴</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> getUserInfo = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line">  $.ajax(&#123;</span><br><span class="line">    type: <span class="string">"get"</span>,</span><br><span class="line">    url: <span class="string">"www.baidu.com"</span>,</span><br><span class="line">    success: <span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">if</span> (data.success) &#123;</span><br><span class="line">        resolve(data.result);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        reject(data.errMsg);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> getDataList = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line">  $.ajax(&#123;</span><br><span class="line">    type: <span class="string">"get"</span>,</span><br><span class="line">    url: <span class="string">"www.google.com"</span>,</span><br><span class="line">    success: <span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">if</span> (data.success) &#123;</span><br><span class="line">        resolve(data.result);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        reject(data.errMsg);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">getUserInfo.then(<span class="function"><span class="keyword">function</span>(<span class="params">json</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;).catch(<span class="function"><span class="keyword">function</span>(<span class="params">errMsg</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//等待两个接口都返回数据以后才执行</span></span><br><span class="line"><span class="built_in">Promise</span>.all([getUserInfo, getDataList]).then(<span class="function"><span class="keyword">function</span>(<span class="params">[json1, json2]</span>)</span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<ul>
<li>放弃wangEditor自带的图片上传功能，选择图片以后，将图片交给webUploader。但是，坑爹的官网并没有教你怎么接收文件，那些教程只是教你怎么使用picker去选择文件。做法就是查看源码，从picker入手，看啊看啊，发现了第1919行的猫腻</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">$( pick.id ).each(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">                <span class="keyword">var</span> options, picker, deferred;</span><br><span class="line"></span><br><span class="line">                deferred = Base.Deferred();</span><br><span class="line"></span><br><span class="line">                options = $.extend(&#123;&#125;, pick, &#123;</span><br><span class="line">                    accept: $.isPlainObject( accept ) ? [ accept ] : accept,</span><br><span class="line">                    swf: opts.swf,</span><br><span class="line">                    runtimeOrder: opts.runtimeOrder,</span><br><span class="line">                    id: <span class="keyword">this</span></span><br><span class="line">                &#125;);</span><br><span class="line"></span><br><span class="line">                picker = <span class="keyword">new</span> FilePicker( options );</span><br><span class="line"></span><br><span class="line">                picker.once( <span class="string">'ready'</span>, deferred.resolve );</span><br><span class="line">                picker.on( <span class="string">'select'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"> files </span>) </span>&#123;</span><br><span class="line">                    me.owner.request( <span class="string">'add-file'</span>, [ files ]);</span><br><span class="line">                &#125;);</span><br><span class="line">                picker.init();</span><br><span class="line"></span><br><span class="line">                me.pickers.push( picker );</span><br><span class="line"></span><br><span class="line">                promises.push( deferred.promise() );</span><br><span class="line">            &#125;);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span> Base.when.apply( Base, promises );</span><br><span class="line">        &#125;,</span><br></pre></td></tr></table></figure>
<p>问题来了，owner是谁？我怎么在外部调用。断点了一下，发现owner就是uploader本身。然后总结出使用代码就是</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">imgUploader.request(<span class="string">'add-file'</span>, files[<span class="number">0</span>]);</span><br></pre></td></tr></table></figure>
<p>添加文件成功了，现在还有一个问题，就是上传完成以后，我怎么将图片插入到编辑器？这个又要去看源码，这次看源码的难度就大了一点。寻找到源码以后，拷贝过来试试</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 根据链接插入图片</span></span><br><span class="line">insertLinkImg: <span class="function"><span class="keyword">function</span> <span class="title">insertLinkImg</span>(<span class="params">link</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> _this2 = <span class="keyword">this</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (!link) &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">var</span> editor = <span class="keyword">this</span>.editor;</span><br><span class="line">    editor.cmd.do(<span class="string">'insertHTML'</span>, <span class="string">'&lt;img src="'</span> + link + <span class="string">'" style="max-width:100%;"/&gt;'</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 验证图片 url 是否有效，无效的话给出提示</span></span><br><span class="line">    <span class="keyword">var</span> img = <span class="built_in">document</span>.createElement(<span class="string">'img'</span>);</span><br><span class="line">    img.onload = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        img = <span class="literal">null</span>;</span><br><span class="line">    &#125;;</span><br><span class="line">    img.onerror = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        img = <span class="literal">null</span>;</span><br><span class="line">        <span class="comment">// 无法成功下载图片</span></span><br><span class="line">        _this2._alert(<span class="string">'插入图片错误'</span>, <span class="string">'wangEditor: \u63D2\u5165\u56FE\u7247\u51FA\u9519\uFF0C\u56FE\u7247\u94FE\u63A5\u662F "'</span> + link + <span class="string">'"\uFF0C\u4E0B\u8F7D\u8BE5\u94FE\u63A5\u5931\u8D25'</span>);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;;</span><br><span class="line">    img.onabort = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        img = <span class="literal">null</span>;</span><br><span class="line">    &#125;;</span><br><span class="line">    img.src = link;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<p>直接在页面上使用，就失败了，一筹莫展，但是我记住了cmd.do这个命令。某次断点的时候，发现editor对象里面有cmd，又总结出了使用方法，完成这个上传功能的修改。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">editor.cmd.do(<span class="string">'insertHTML'</span>, <span class="string">'&lt;img src="'</span> + link + <span class="string">'" style="max-width:100%;"/&gt;'</span>);</span><br></pre></td></tr></table></figure>
  
	</div>
		<footer class="article-footer clearfix">
<div class="article-catetags">


</div>



	<div class="article-share" id="share">
	
	<div class="share-jiathis">
	  
<div class="jiathis_style_24x24">
	<a class="jiathis_button_tsina"></a>
	<a class="jiathis_button_weixin"></a>
	<a class="jiathis_button_renren"></a>
	<a class="jiathis_button_qzone"></a>
	<a class="jiathis_button_googleplus"></a>
	<a class="jiathis_button_douban"></a>
	<a href="http://www.jiathis.com/share" class="jiathis jiathis_txt jtico jtico_jiathis" target="_blank"></a>
	<a class="jiathis_counter_style"></a>
</div>
<script type="text/javascript">
    var jiathis_config={
    data_track_clickback:true,
    sm:"copy,renren,cqq",
    pic:"",
    summary:"",
     ralateuid:{"tsina":"1634073622"},hideMore:false}
    
  </script> 
<script type="text/javascript" src="//v3.jiathis.com/code/jia.js?uid=
2103362" charset="utf-8"></script>      

	 </div>
	
	</div>


</footer>

   	       
	</article>
	
<nav class="article-nav clearfix">
 
 <div class="prev">
 <a href="/2017/11/10/2017/2017-10月工作笔记/" title="2017-10月工作笔记">
  <strong>上一篇：</strong><br>
  <span>
  2017-10月工作笔记</span>
</a>
</div>


<div class="next">
<a href="/2017/08/10/2017/2017-8月工作笔记/" title="2017-8月工作笔记">
 <strong>下一篇：</strong><br> 
 <span>2017-8月工作笔记
</span>
</a>
</div>

</nav>

	
<section id="comments" class="comment">
	<div class="ds-thread" data-thread-key="2017/10/10/2017/2017-9月工作笔记/" data-title="2017-9月工作笔记" data-url="http://yoursite.com/2017/10/10/2017/2017-9月工作笔记/"></div>
</section>


</div>  
      <div class="openaside"><a class="navbutton" href="#" title="显示侧边栏"></a></div>

  <div id="toc" class="toc-aside">
  <strong class="toc-title">文章目录</strong>
 
 <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#9月2日-天气-阴"><span class="toc-number">1.</span> <span class="toc-text">9月2日 天气:阴</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9月6日-天气-雨"><span class="toc-number">2.</span> <span class="toc-text">9月6日 天气:雨</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9月7日-天气-雨"><span class="toc-number">3.</span> <span class="toc-text">9月7日 天气:雨</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9月8日-天气-阴"><span class="toc-number">4.</span> <span class="toc-text">9月8日 天气:阴</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9月11日-天气-阴"><span class="toc-number">5.</span> <span class="toc-text">9月11日 天气:阴</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9月12日-天气-晴"><span class="toc-number">6.</span> <span class="toc-text">9月12日 天气:晴</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9月13日-天气-阴"><span class="toc-number">7.</span> <span class="toc-text">9月13日 天气:阴</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9月14日-天气-晴"><span class="toc-number">8.</span> <span class="toc-text">9月14日 天气:晴</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9月15日-天气-晴"><span class="toc-number">9.</span> <span class="toc-text">9月15日 天气:晴</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9月16日-天气-晴"><span class="toc-number">10.</span> <span class="toc-text">9月16日 天气:晴</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9月17日-天气-晴"><span class="toc-number">11.</span> <span class="toc-text">9月17日 天气:晴</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9月18日-天气-晴"><span class="toc-number">12.</span> <span class="toc-text">9月18日 天气:晴</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9月21日-天气-晴"><span class="toc-number">13.</span> <span class="toc-text">9月21日 天气:晴</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9月22日-天气-晴"><span class="toc-number">14.</span> <span class="toc-text">9月22日 天气:晴</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9月23日-天气-晴"><span class="toc-number">15.</span> <span class="toc-text">9月23日 天气:晴</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9月27日-天气-晴"><span class="toc-number">16.</span> <span class="toc-text">9月27日 天气:晴</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9月28日-天气-晴"><span class="toc-number">17.</span> <span class="toc-text">9月28日 天气:晴</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9月30日-天气-晴"><span class="toc-number">18.</span> <span class="toc-text">9月30日 天气:晴</span></a></li></ol>
 
  </div>

<div id="asidepart">
<div class="closeaside"><a class="closebutton" href="#" title="隐藏侧边栏"></a></div>
<aside class="clearfix">

  
<div class="github-card">
<p class="asidetitle">Github 名片</p>
<div class="github-card" data-github="Eric1235" data-width="220" data-height="119" data-theme="medium">
<script type="text/javascript" src="//cdn.jsdelivr.net/github-cards/latest/widget.js"></script>
</div>
  </div>



  

  
<div class="tagslist">
	<p class="asidetitle">标签</p>
		<ul class="clearfix">
		
			
				<li><a href="/tags/life/" title="life">life<sup>11</sup></a></li>
			
		
			
				<li><a href="/tags/work/" title="work">work<sup>6</sup></a></li>
			
		
			
				<li><a href="/tags/coding/" title="coding">coding<sup>5</sup></a></li>
			
		
			
				<li><a href="/tags/college/" title="college">college<sup>5</sup></a></li>
			
		
			
				<li><a href="/tags/feuture/" title="feuture">feuture<sup>3</sup></a></li>
			
		
			
				<li><a href="/tags/study/" title="study">study<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/future/" title="future">future<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/me/" title="me">me<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/android/" title="android">android<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/sunshine/" title="sunshine">sunshine<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/work-life/" title="-work -life">-work -life<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/fight/" title="fight">fight<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/improve/" title="improve">improve<sup>1</sup></a></li>
			
		
		</ul>
</div>


  <div class="linkslist">
  <p class="asidetitle">友情链接</p>
    <ul>
        
          <li>
            
            	<a href="https://coderq.com" target="_blank" title="一个面向程序员交流分享的新一代社区">码农圈</a>
            
          </li>
        
          <li>
            
            	<a href="http://weicong.win" target="_blank" title="Weicong Blog">Weicong Blog</a>
            
          </li>
        
    </ul>
</div>

  


  <div class="rsspart">
	<a href="/atom.xml" target="_blank" title="rss">RSS 订阅</a>
</div>

  <div class="weiboshow">
  <p class="asidetitle">新浪微博</p>
    <iframe width="100%" height="119" class="share_self" frameborder="0" scrolling="no" src="http://widget.weibo.com/weiboshow/index.php?language=&width=0&height=119&fansRow=2&ptype=1&speed=0&skin=9&isTitle=1&noborder=1&isWeibo=0&isFans=0&uid=1634073622&verifier=43ce7f75&dpc=1"></iframe>
</div>


</aside>
</div>
    </div>
    <footer><div id="footer">
	
	<div class="line">
		<span></span>
		<div class="author"></div>
	</div>
	
	
	<section class="info">
		<p> Be Fearless <br>
			Be an Engineer</p>
	</section>
	 
	<div class="social-font">
		
		<a href="http://weibo.com/1634073622" target="_blank" class="icon-weibo" title="微博"></a>
		
		
		<a href="https://github.com/Eric1235" target="_blank" class="icon-github" title="github"></a>
		
		
		
		<a href="https://twitter.com/ericli1235" target="_blank" class="icon-twitter" title="twitter"></a>
		
		
		<a href="https://www.facebook.com/lixinkun" target="_blank" class="icon-facebook" title="facebook"></a>
		
		
		
		
		
		<a href="https://plus.google.com/Eric1235?rel=author" target="_blank" class="icon-google_plus" title="Google+"></a>
		
		
		<a href="mailto:Eric1235@gmail.com" target="_blank" class="icon-email" title="Email Me"></a>
		
	</div>
			
		

		<p class="copyright">
		Powered by <a href="http://hexo.io" target="_blank" title="hexo">hexo</a> and Theme by <a href="https://github.com/wuchong/jacman" target="_blank" title="Jacman">Jacman</a> © 2018 
		
		<a href="/about" target="_blank" title="Eric Li">Eric Li</a>
		
		
		</p>
</div>
</footer>
    <script src="/js/jquery-2.0.3.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>
<script src="/js/jquery.qrcode-0.12.0.min.js"></script>

<script type="text/javascript">
$(document).ready(function(){ 
  $('.navbar').click(function(){
    $('header nav').toggleClass('shownav');
  });
  var myWidth = 0;
  function getSize(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
  };
  var m = $('#main'),
      a = $('#asidepart'),
      c = $('.closeaside'),
      o = $('.openaside');
  c.click(function(){
    a.addClass('fadeOut').css('display', 'none');
    o.css('display', 'block').addClass('fadeIn');
    m.addClass('moveMain');
  });
  o.click(function(){
    o.css('display', 'none').removeClass('beforeFadeIn');
    a.css('display', 'block').removeClass('fadeOut').addClass('fadeIn');      
    m.removeClass('moveMain');
  });
  $(window).scroll(function(){
    o.css("top",Math.max(80,260-$(this).scrollTop()));
  });
  
  $(window).resize(function(){
    getSize(); 
    if (myWidth >= 1024) {
      $('header nav').removeClass('shownav');
    }else{
      m.removeClass('moveMain');
      a.css('display', 'block').removeClass('fadeOut');
      o.css('display', 'none');
      
      $('#toc.toc-aside').css('display', 'none');
        
    }
  });
});
</script>

<script type="text/javascript">
$(document).ready(function(){ 
  var ai = $('.article-content>iframe'),
      ae = $('.article-content>embed'),
      t  = $('#toc'),
      ta = $('#toc.toc-aside'),
      o  = $('.openaside'),
      c  = $('.closeaside');
  if(ai.length>0){
    ai.wrap('<div class="video-container" />');
  };
  if(ae.length>0){
   ae.wrap('<div class="video-container" />');
  };
  c.click(function(){
    ta.css('display', 'block').addClass('fadeIn');
  });
  o.click(function(){
    ta.css('display', 'none');
  });
  $(window).scroll(function(){
    ta.css("top",Math.max(140,320-$(this).scrollTop()));
  });
});
</script>




<script type="text/javascript">
  var duoshuoQuery = {short_name:"ericli"};
  (function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = '//static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0] 
    || document.getElementsByTagName('body')[0]).appendChild(ds);
  })();
</script> 







<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
$(document).ready(function(){ 
  $('.article-content').each(function(i){
    $(this).find('img').each(function(){
      if ($(this).parent().hasClass('fancybox')) return;
      var alt = this.alt;
      if (alt) $(this).after('<span class="caption">' + alt + '</span>');
      $(this).wrap('<a href="' + this.src + '" title="' + alt + '" class="fancybox"></a>');
    });
    $(this).find('.fancybox').each(function(){
      $(this).attr('rel', 'article' + i);
    });
  });
  if($.fancybox){
    $('.fancybox').fancybox();
  }
}); 
</script>



<!-- Analytics Begin -->



<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?e6d1f421bbc9962127a50488f9ed37d1";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>



<!-- Analytics End -->

<!-- Totop Begin -->

	<div id="totop">
	<a title="返回顶部"><img src="/img/scrollup.png"></a>
	</div>
	<script src="/js/totop.js"></script>

<!-- Totop End -->

<!-- MathJax Begin -->
<!-- mathjax config similar to math.stackexchange -->


<!-- MathJax End -->

<!-- Tiny_search Begin -->

<!-- Tiny_search End -->

  </body>
</html>
